import Badge from '../../../../src/components/Badge';
import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

# Markdown : IntermÃ©diaire

:::note
**Temps de lecture :** 45 minutes  
**Objectif :** MaÃ®triser les fonctionnalitÃ©s avancÃ©es pour une utilisation professionnelle
:::

## 1. Tableaux Professionnels <Badge niveau="IntermÃ©diaire" />

### 1.1 Syntaxe et Formatage

Les tableaux permettent d'organiser des donnÃ©es de maniÃ¨re structurÃ©e et lisible.

:::tip Bonnes Pratiques Tableaux

-   **Espacement cohÃ©rent** : Aligner visuellement les `|` dans le source
-   **En-tÃªtes descriptifs** : Noms de colonnes clairs et prÃ©cis
-   **DonnÃ©es homogÃ¨nes** : MÃªme type de contenu par colonne
-   **Taille raisonnable** : Maximum 6-8 colonnes pour la lisibilitÃ© mobile

:::

<Tabs>
<TabItem value="syntaxe" label="Syntaxe de Base">

```markdown
| Colonne 1 | Colonne 2 | Colonne 3 |
| --------- | --------- | --------- |
| DonnÃ©e 1  | DonnÃ©e 2  | DonnÃ©e 3  |
| Ligne 2   | Valeur 2  | Valeur 3  |
| Ligne 3   | Valeur 4  | Valeur 5  |
```

</TabItem>
<TabItem value="resultat" label="RÃ©sultat">

| Colonne 1 | Colonne 2 | Colonne 3 |
| --------- | --------- | --------- |
| DonnÃ©e 1  | DonnÃ©e 2  | DonnÃ©e 3  |
| Ligne 2   | Valeur 2  | Valeur 3  |
| Ligne 3   | Valeur 4  | Valeur 5  |

</TabItem>
<TabItem value="alignement" label="Alignement des Colonnes">

```markdown
| Gauche | CentrÃ© | Droite |   Auto |
| :----- | :----: | -----: | -----: |
| Texte  | Texte  |  Texte |  Texte |
| AlignÃ© | AlignÃ© | AlignÃ© | Normal |
| Gauche | Centre | Droite | DÃ©faut |
```

**LÃ©gende des alignements :**

-   `:---` = Alignement Ã  gauche
-   `:---:` = Alignement centrÃ©
-   `---:` = Alignement Ã  droite
-   `---` = Alignement automatique

#### RÃ©sultat

| Gauche | CentrÃ© | Droite |   Auto |
| :----- | :----: | -----: | -----: |
| Texte  | Texte  |  Texte |  Texte |
| AlignÃ© | AlignÃ© | AlignÃ© | Normal |
| Gauche | Centre | Droite | DÃ©faut |

</TabItem>
<TabItem value="schema" label="SchÃ©ma de construction d'un tableau">

```mermaid
graph TB
    A[Tableau Markdown] --> B[Ligne d'en-tÃªtes]
    A --> C[Ligne de sÃ©parateurs]
    A --> D[Lignes de donnÃ©es]

    B --> E["| Colonne 1 | Colonne 2 |"]
    C --> F["|:---------|:---------:|"]
    D --> G["| DonnÃ©e 1 | DonnÃ©e 2 |"]
    D --> H["| DonnÃ©e 3 | DonnÃ©e 4 |"]

    F --> I[Alignement dÃ©fini ici]

    style A fill:#e3f2fd
    style C fill:#fff3c4
    style I fill:#ffccbc
```

</TabItem>
</Tabs>

### 1.2 Tableaux Complexes et Cas d'Usage

<Tabs>
<TabItem value="technique" label="DonnÃ©es Techniques">

```markdown
## Comparaison des Technologies

| Technologie | Performance |  SÃ©curitÃ©  | ComplexitÃ© |  Support   |  Score |
| ----------- | :---------: | :--------: | :--------: | :--------: | -----: |
| **Node.js** |  â­â­â­â­   |   â­â­â­   |   â­â­â­   | â­â­â­â­â­ | 85/100 |
| **Python**  |   â­â­â­    |  â­â­â­â­  |    â­â­    | â­â­â­â­â­ | 82/100 |
| **Java**    | â­â­â­â­â­  | â­â­â­â­â­ |  â­â­â­â­  | â­â­â­â­â­ | 95/100 |
| **Go**      | â­â­â­â­â­  |  â­â­â­â­  |   â­â­â­   |   â­â­â­   | 88/100 |
```

</TabItem>
<TabItem value="resultat" label="RÃ©sultat DonnÃ©es Techniques">

| Technologie | Performance |  SÃ©curitÃ©  | ComplexitÃ© |  Support   |  Score |
| ----------- | :---------: | :--------: | :--------: | :--------: | -----: |
| **Node.js** |  â­â­â­â­   |   â­â­â­   |   â­â­â­   | â­â­â­â­â­ | 85/100 |
| **Python**  |   â­â­â­    |  â­â­â­â­  |    â­â­    | â­â­â­â­â­ | 82/100 |
| **Java**    | â­â­â­â­â­  | â­â­â­â­â­ |  â­â­â­â­  | â­â­â­â­â­ | 95/100 |
| **Go**      | â­â­â­â­â­  |  â­â­â­â­  |   â­â­â­   |   â­â­â­   | 88/100 |

</TabItem>
</Tabs>

<Tabs>
<TabItem value="devops" label="Tableau DevSecOps">

```markdown
## Pipeline CI/CD - Statut des Environnements

| Environnement | Build Status | Tests  |  SÃ©curitÃ©  |  Deploy   | Monitoring |
| ------------- | :----------: | :----: | :--------: | :-------: | :--------: |
| **DEV**       |  âœ… Passing  | âœ… 98% | âš ï¸ Warning |  âœ… Auto  | ğŸŸ¢ Healthy |
| **STAGING**   |  âœ… Passing  | âœ… 95% | âœ… Secure  |  âœ… Auto  | ğŸŸ¢ Healthy |
| **PROD**      |  âœ… Passing  | âœ… 99% | âœ… Secure  | ğŸ”’ Manual | ğŸŸ¢ Healthy |
| **DR**        |  â¸ï¸ Stopped  | â– N/A | âœ… Secure  | ğŸ”’ Manual | ğŸŸ¡ Standby |
```

</TabItem>
<TabItem value="resultat" label="RÃ©sultat Tableau DevSecOps">

| Environnement | Build Status | Tests  |  SÃ©curitÃ©  |  Deploy   | Monitoring |
| ------------- | :----------: | :----: | :--------: | :-------: | :--------: |
| **DEV**       |  âœ… Passing  | âœ… 98% | âš ï¸ Warning |  âœ… Auto  | ğŸŸ¢ Healthy |
| **STAGING**   |  âœ… Passing  | âœ… 95% | âœ… Secure  |  âœ… Auto  | ğŸŸ¢ Healthy |
| **PROD**      |  âœ… Passing  | âœ… 99% | âœ… Secure  | ğŸ”’ Manual | ğŸŸ¢ Healthy |
| **DR**        |  â¸ï¸ Stopped  | â– N/A | âœ… Secure  | ğŸ”’ Manual | ğŸŸ¡ Standby |

</TabItem>
</Tabs>

<Tabs>
<TabItem value="audit" label="Audit de SÃ©curitÃ©">

```markdown
## VulnÃ©rabilitÃ©s par CriticitÃ©

| Composant        | Critique | Ã‰levÃ© | Moyen | Faible | Score CVSS | Action                   |
| ---------------- | :------: | :---: | :---: | :----: | :--------: | ------------------------ |
| **API Core**     |    0     |   1   |   3   |   5    |    6.2     | âš ï¸ Correction requise    |
| **Auth Service** |    0     |   0   |   2   |   1    |    4.1     | âœ… Acceptable            |
| **Database**     |    1     |   0   |   1   |   2    |    8.9     | ğŸš¨ **URGENT**            |
| **Frontend**     |    0     |   2   |   4   |   8    |    5.8     | âš ï¸ Planifier correction  |
| **Dependencies** |    0     |   3   |  12   |   25   |    5.4     | ğŸ“… Mise Ã  jour rÃ©guliÃ¨re |
```

</TabItem>
<TabItem value="resultat" label="RÃ©sultat Audit">

| Composant        | Critique | Ã‰levÃ© | Moyen | Faible | Score CVSS | Action                   |
| ---------------- | :------: | :---: | :---: | :----: | :--------: | ------------------------ |
| **API Core**     |    0     |   1   |   3   |   5    |    6.2     | âš ï¸ Correction requise    |
| **Auth Service** |    0     |   0   |   2   |   1    |    4.1     | âœ… Acceptable            |
| **Database**     |    1     |   0   |   1   |   2    |    8.9     | ğŸš¨ **URGENT**            |
| **Frontend**     |    0     |   2   |   4   |   8    |    5.8     | âš ï¸ Planifier correction  |
| **Dependencies** |    0     |   3   |  12   |   25   |    5.4     | ğŸ“… Mise Ã  jour rÃ©guliÃ¨re |

</TabItem>
</Tabs>

### 1.3 Limitations et Alternatives

:::danger Comprendre la Limitations des Tableaux Markdown
Les tableaux Markdown ont des contraintes importantes :

-   **Pas de fusion de cellules** native
-   **Pas de formatage avancÃ©** (couleurs, bordures personnalisÃ©es)
-   **DifficultÃ© avec contenu long** dans les cellules
-   **Responsive limitÃ©** sur mobile
    :::

<Tabs>
<TabItem value="html" label="Solution HTML pour Cas Complexes">

```html
<!-- Tableau avec fusion de cellules -->
<table>
    <thead>
        <tr>
            <th rowspan="2">Service</th>
            <th colspan="2">Performance</th>
            <th rowspan="2">Status</th>
        </tr>
        <tr>
            <th>Latence</th>
            <th>Throughput</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td><strong>API Gateway</strong></td>
            <td>15ms</td>
            <td>10k req/s</td>
            <td>ğŸŸ¢ Healthy</td>
        </tr>
        <tr>
            <td><strong>Auth Service</strong></td>
            <td>8ms</td>
            <td>5k req/s</td>
            <td>ğŸŸ¢ Healthy</td>
        </tr>
    </tbody>
</table>
```

</TabItem>
<TabItem value="html-result" label="RÃ©sultat Solution HTML pour Cas Complexes">

<!-- Tableau avec fusion de cellules -->

<table>
    <thead>
        <tr>
            <th rowspan="2">Service</th>
            <th colspan="2">Performance</th>
            <th rowspan="2">Status</th>
        </tr>
        <tr>
            <th>Latence</th>
            <th>Throughput</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>
                <strong>API Gateway</strong>
            </td>
            <td>15ms</td>
            <td>10k req/s</td>
            <td>ğŸŸ¢ Healthy</td>
        </tr>
        <tr>
            <td>
                <strong>Auth Service</strong>
            </td>
            <td>8ms</td>
            <td>5k req/s</td>
            <td>ğŸŸ¢ Healthy</td>
        </tr>
    </tbody>
</table>

</TabItem>
</Tabs>

## 2. Blocs de Code AvancÃ©s <Badge niveau="IntermÃ©diaire" />

### 2.1 Code Inline OptimisÃ©

L'utilisation appropriÃ©e du code inline amÃ©liore la lisibilitÃ© technique.

<Tabs>
<TabItem value="variables" label="Variables et Configuration">

```markdown
## Configuration Serveur

La variable d'environnement `NODE_ENV` doit Ãªtre dÃ©finie sur `production`.
Le fichier de configuration `config.json` contient les paramÃ¨tres `database.host` et `database.port`.

Pour modifier le timeout, utilisez le paramÃ¨tre `--timeout=30s` lors du dÃ©marrage.
```

</TabItem>
<TabItem value="resultat-variables" label="RÃ©sultat Variables et Configuration">

:::warning
Ici **volontairement** j'ai dÃ©fini un titre (h4) au lieu du (h2) pour Ã©viter de casser la navigation sur votre droite.
:::

#### Confiuration Serveur

La variable d'environnement `NODE_ENV` doit Ãªtre dÃ©finie sur `production`.
Le fichier de configuration `config.json` contient les paramÃ¨tres `database.host` et `database.port`.

Pour modifier le timeout, utilisez le paramÃ¨tre `--timeout=30s` lors du dÃ©marrage.

</TabItem>
</Tabs>

<Tabs>
<TabItem value="commandes" label="Commandes et API">

```markdown
## Commandes Docker

Lancer le conteneur avec `docker run -d --name api-server image:latest`.
VÃ©rifier les logs avec `docker logs api-server`.
AccÃ©der au conteneur via `docker exec -it api-server /bin/bash`.

## Endpoints API

-   `GET /api/users` - Liste tous les utilisateurs
-   `POST /api/users` - CrÃ©e un nouvel utilisateur
-   `PUT /api/users/{id}` - Met Ã  jour l'utilisateur `{id}`
-   `DELETE /api/users/{id}` - Supprime l'utilisateur `{id}`
```

</TabItem>
<TabItem value="resultat-commandes" label="RÃ©sultat Commandes et API">

:::warning
Ici **volontairement** j'ai dÃ©fini un titre (h4) au lieu du (h2) pour Ã©viter de casser la navigation sur votre droite.
:::

#### Commandes Docker

Lancer le conteneur avec `docker run -d --name api-server image:latest`.
VÃ©rifier les logs avec `docker logs api-server`.
AccÃ©der au conteneur via `docker exec -it api-server /bin/bash`.

#### Endpoints API

-   `GET /api/users` - Liste tous les utilisateurs
-   `POST /api/users` - CrÃ©e un nouvel utilisateur
-   `PUT /api/users/{id}` - Met Ã  jour l'utilisateur `{id}`
-   `DELETE /api/users/{id}` - Supprime l'utilisateur `{id}`

</TabItem>
</Tabs>

### 2.2 Blocs de Code avec Coloration Syntaxique

La coloration syntaxique amÃ©liore la lisibilitÃ© et la comprÃ©hension du code.

:::warning Attention
Si vous ne comprenez pas les morceaux de codes prÃ©sentÃ©s ici, **ce n'est vraiment pas grave**. L'essentiel ici est de comprendre comment crÃ©er un bloc de code et le prÃ©senter proprement.

:::

<Tabs>
<TabItem value="javascript" label="JavaScript / Node.js">

#### Syntaxe

````markdown
```js
# Ceci est un commentaires
const express = require('express');
```
````

#### Exemple de code avec coloration syntaxique

```javascript
// Configuration sÃ©curisÃ©e de l'API Express
const express = require('express');
const helmet = require('helmet'); // SÃ©curitÃ© HTTP headers
const rateLimit = require('express-rate-limit'); // Rate limiting
const jwt = require('jsonwebtoken');

const app = express();

// Middleware de sÃ©curitÃ©
app.use(helmet()); // Protection des headers HTTP
app.use(express.json({ limit: '10mb' })); // Limite taille payload

// Rate limiting global
const limiter = rateLimit({
    windowMs: 15 * 60 * 1000, // 15 minutes
    max: 100, // Limite chaque IP Ã  100 requÃªtes par fenÃªtre
    message: 'Too many requests from this IP',
    standardHeaders: true, // Return rate limit info in the `RateLimit-*` headers
    legacyHeaders: false, // Disable the `X-RateLimit-*` headers
});

app.use('/api/', limiter);

// Middleware d'authentification JWT
const authenticateToken = (req, res, next) => {
    const authHeader = req.headers['authorization'];
    const token = authHeader && authHeader.split(' ')[1]; // Bearer TOKEN

    if (!token) {
        return res.sendStatus(401); // Unauthorized
    }

    jwt.verify(token, process.env.ACCESS_TOKEN_SECRET, (err, user) => {
        if (err) return res.sendStatus(403); // Forbidden
        req.user = user;
        next(); // Continue vers la route suivante
    });
};

// Route protÃ©gÃ©e avec validation
app.get('/api/users', authenticateToken, async (req, res) => {
    try {
        // Logique mÃ©tier avec gestion d'erreur
        const users = await getUsersFromDatabase();
        res.json({ success: true, data: users });
    } catch (error) {
        console.error('Erreur rÃ©cupÃ©ration utilisateurs:', error);
        res.status(500).json({
            success: false,
            error: 'Internal server error',
        });
    }
});

module.exports = app;
```

</TabItem>
<TabItem value="python" label="Python / Django">

#### Syntaxe

````markdown
```python
# models.py - ModÃ¨les Django avec sÃ©curitÃ© renforcÃ©e
from django.db import models

# ... reste du code
```
````

#### Exemple de code avec coloration syntaxique

```python
# models.py - ModÃ¨les Django avec sÃ©curitÃ© renforcÃ©e
from django.db import models
from django.contrib.auth.models import AbstractUser
from django.core.validators import RegexValidator
from django.utils import timezone
import uuid

class CustomUser(AbstractUser):
    """ModÃ¨le utilisateur personnalisÃ© avec champs sÃ©curisÃ©s"""

    # Identifiant unique UUID pour Ã©viter l'Ã©numÃ©ration
    uuid = models.UUIDField(
        default=uuid.uuid4,
        editable=False,
        unique=True,
        help_text="Identifiant unique non-sÃ©quentiel"
    )

    # Validation du numÃ©ro de tÃ©lÃ©phone
    phone_regex = RegexValidator(
        regex=r'^\+?1?\d{9,15}$',
        message="Format: '+999999999'. Maximum 15 chiffres."
    )
    phone_number = models.CharField(
        validators=[phone_regex],
        max_length=17,
        blank=True,
        help_text="NumÃ©ro de tÃ©lÃ©phone au format international"
    )

    # Champs d'audit automatiques
    created_at = models.DateTimeField(auto_now_add=True)
    updated_at = models.DateTimeField(auto_now=True)
    last_login_ip = models.GenericIPAddressField(null=True, blank=True)

    # Flag de sÃ©curitÃ©
    is_verified = models.BooleanField(
        default=False,
        help_text="Compte vÃ©rifiÃ© par email/SMS"
    )
    failed_login_attempts = models.PositiveIntegerField(
        default=0,
        help_text="Nombre de tentatives de connexion Ã©chouÃ©es"
    )

    class Meta:
        db_table = 'auth_custom_user'
        indexes = [
            models.Index(fields=['email']),
            models.Index(fields=['uuid']),
            models.Index(fields=['created_at']),
        ]

    def __str__(self):
        return f"{self.username} ({self.uuid})"

    def reset_failed_attempts(self):
        """Remet Ã  zÃ©ro le compteur de tentatives Ã©chouÃ©es"""
        self.failed_login_attempts = 0
        self.save(update_fields=['failed_login_attempts'])
```

</TabItem>
<TabItem value="bash" label="Bash / DevOps">

#### Syntaxe

````markdown
```bash
#!/bin/bash
# deploy.sh - Script de dÃ©ploiement sÃ©curisÃ© avec vÃ©rifications

set -euo pipefail  # ArrÃªt strict en cas d'erreur
```
````

#### Exemple de code avec coloration syntaxique

```bash
#!/bin/bash
# deploy.sh - Script de dÃ©ploiement sÃ©curisÃ© avec vÃ©rifications

set -euo pipefail  # ArrÃªt strict en cas d'erreur

# Couleurs pour l'affichage
readonly RED='\033[0;31m'
readonly GREEN='\033[0;32m'
readonly YELLOW='\033[1;33m'
readonly NC='\033[0m' # No Color

# Variables de configuration
readonly APP_NAME="api-secure"
readonly DEPLOY_ENV="${1:-staging}"  # staging par dÃ©faut
readonly BACKUP_DIR="/backup/$(date +%Y%m%d_%H%M%S)"
readonly LOG_FILE="/var/log/deploy-$(date +%Y%m%d).log"

# Fonction de logging avec timestamp
log() {
    local level=$1
    shift
    echo -e "[$(date '+%Y-%m-%d %H:%M:%S')] [$level] $*" | tee -a "$LOG_FILE"
}

# Fonction d'erreur avec nettoyage
error_exit() {
    log "ERROR" "${RED}$1${NC}"
    cleanup
    exit 1
}

# Fonction de nettoyage en cas d'Ã©chec
cleanup() {
    log "INFO" "Nettoyage des fichiers temporaires..."
    rm -rf /tmp/deploy-*
}

# VÃ©rification des prÃ©requis
check_prerequisites() {
    log "INFO" "VÃ©rification des prÃ©requis..."

    # VÃ©rifier si l'utilisateur a les droits nÃ©cessaires
    if [[ $EUID -ne 0 ]] && [[ "$DEPLOY_ENV" == "production" ]]; then
        error_exit "Le dÃ©ploiement en production nÃ©cessite les droits root"
    fi

    # VÃ©rifier la disponibilitÃ© des outils
    local tools=("docker" "git" "curl" "jq")
    for tool in "${tools[@]}"; do
        if ! command -v "$tool" &> /dev/null; then
            error_exit "Outil requis manquant: $tool"
        fi
    done

    # VÃ©rifier l'espace disque (minimum 1GB)
    local available_space=$(df / | awk 'NR==2 {print $4}')
    if [[ $available_space -lt 1048576 ]]; then
        error_exit "Espace disque insuffisant (< 1GB disponible)"
    fi

    log "INFO" "${GREEN}PrÃ©requis validÃ©s${NC}"
}

# Fonction de sauvegarde avant dÃ©ploiement
backup_current_version() {
    log "INFO" "Sauvegarde de la version actuelle..."

    if [[ -d "/var/www/$APP_NAME" ]]; then
        mkdir -p "$BACKUP_DIR"
        cp -r "/var/www/$APP_NAME" "$BACKUP_DIR/"

        # Sauvegarde de la base de donnÃ©es
        docker exec db-container pg_dump -U postgres api_db > "$BACKUP_DIR/database.sql"

        log "INFO" "${GREEN}Sauvegarde crÃ©Ã©e: $BACKUP_DIR${NC}"
    else
        log "WARN" "${YELLOW}Aucune version existante Ã  sauvegarder${NC}"
    fi
}

# DÃ©ploiement principal
deploy_application() {
    log "INFO" "DÃ©but du dÃ©ploiement de $APP_NAME en environnement $DEPLOY_ENV"

    # RÃ©cupÃ©ration du code source
    cd /tmp
    git clone --depth 1 https://github.com/company/$APP_NAME.git deploy-$APP_NAME
    cd deploy-$APP_NAME

    # VÃ©rification de l'intÃ©gritÃ© (checksums, signatures GPG)
    if [[ -f "checksums.sha256" ]]; then
        sha256sum -c checksums.sha256 || error_exit "VÃ©rification d'intÃ©gritÃ© Ã©chouÃ©e"
    fi

    # Construction de l'image Docker
    docker build -t "$APP_NAME:latest" . || error_exit "Construction Docker Ã©chouÃ©e"

    # Tests de sÃ©curitÃ© (exemple avec Trivy)
    if command -v trivy &> /dev/null; then
        log "INFO" "Scan de sÃ©curitÃ© de l'image..."
        trivy image --severity HIGH,CRITICAL "$APP_NAME:latest" || error_exit "VulnÃ©rabilitÃ©s critiques dÃ©tectÃ©es"
    fi

    # ArrÃªt gracieux de l'ancienne version
    if docker ps | grep -q "$APP_NAME"; then
        log "INFO" "ArrÃªt gracieux de l'ancienne version..."
        docker stop "$APP_NAME" || true
        docker rm "$APP_NAME" || true
    fi

    # DÃ©marrage de la nouvelle version
    docker run -d \
        --name "$APP_NAME" \
        --restart unless-stopped \
        -p 3000:3000 \
        -v /var/log/$APP_NAME:/app/logs \
        -e NODE_ENV="$DEPLOY_ENV" \
        "$APP_NAME:latest" || error_exit "DÃ©marrage de l'application Ã©chouÃ©"

    # VÃ©rification de santÃ©
    log "INFO" "VÃ©rification de santÃ© de l'application..."
    local max_attempts=30
    local attempt=1

    while [[ $attempt -le $max_attempts ]]; do
        if curl -f http://localhost:3000/health &> /dev/null; then
            log "INFO" "${GREEN}Application dÃ©ployÃ©e avec succÃ¨s !${NC}"
            return 0
        fi

        log "INFO" "Tentative $attempt/$max_attempts - En attente..."
        sleep 10
        ((attempt++))
    done

    error_exit "L'application ne rÃ©pond pas aprÃ¨s le dÃ©ploiement"
}

# Point d'entrÃ©e principal
main() {
    log "INFO" "=== DÃ©but du dÃ©ploiement ==="

    check_prerequisites
    backup_current_version
    deploy_application

    log "INFO" "${GREEN}=== DÃ©ploiement terminÃ© avec succÃ¨s ===${NC}"
}

# Gestion des signaux pour nettoyage
trap cleanup INT TERM

# ExÃ©cution
main "$@"
```

</TabItem>
</Tabs>

### 2.3 Blocs Diff - Visualisation des Modifications <Badge niveau="AvancÃ©" />

Les blocs diff permettent de montrer clairement les modifications de code avec des couleurs.

<Tabs>
<TabItem value="syntaxe" label="Syntaxe des Blocs Diff">

#### Syntaxe

````markdown
```diff
// AmÃ©lioration de la sÃ©curitÃ© d'authentification
function authenticateUser(username, password) {
-   // Ancienne mÃ©thode non sÃ©curisÃ©e
-   if (password === user.password) {
-       return { success: true, user: user };
-   }
+   // Nouvelle mÃ©thode avec hachage bcrypt
+   const isValid = await bcrypt.compare(password, user.hashedPassword);
+   if (isValid) {
+       return {
+           success: true,
+           user: { id: user.id, username: user.username } // Pas de donnÃ©es sensibles
+       };
+   }

    return { success: false, error: 'Invalid credentials' };
}

// Configuration de session sÃ©curisÃ©e
const sessionConfig = {
-   secret: 'simple-secret',
-   secure: false,
+   secret: process.env.SESSION_SECRET, // Secret depuis variable d'environnement
+   secure: process.env.NODE_ENV === 'production', // HTTPS en production
+   httpOnly: true, // Protection XSS
+   sameSite: 'strict' // Protection CSRF
};
```
````

#### Exemple de code avec coloration syntaxique

:::danger ATTENTION
Sur docusaurus, ce bout de code n'est pas intrÃ©prÃ©tÃ© ainsi, il faudrait l'utiliser sur GitHub pour le voir en action.

:::

```diff
// AmÃ©lioration de la sÃ©curitÃ© d'authentification
function authenticateUser(username, password) {
-   // Ancienne mÃ©thode non sÃ©curisÃ©e
-   if (password === user.password) {
-       return { success: true, user: user };
-   }
+   // Nouvelle mÃ©thode avec hachage bcrypt
+   const isValid = await bcrypt.compare(password, user.hashedPassword);
+   if (isValid) {
+       return {
+           success: true,
+           user: { id: user.id, username: user.username } // Pas de donnÃ©es sensibles
+       };
+   }

    return { success: false, error: 'Invalid credentials' };
}

// Configuration de session sÃ©curisÃ©e
const sessionConfig = {
-   secret: 'simple-secret',
-   secure: false,
+   secret: process.env.SESSION_SECRET, // Secret depuis variable d'environnement
+   secure: process.env.NODE_ENV === 'production', // HTTPS en production
+   httpOnly: true, // Protection XSS
+   sameSite: 'strict' // Protection CSRF
};
```

**Convention des couleurs :**

-   Lignes avec `+` : **ğŸŸ¢ Vert** (ajouts/amÃ©liorations)
-   Lignes avec `-` : **ğŸ”´ Rouge** (suppressions/obsolÃ¨te)
-   Lignes normales : **âšª Blanc** (contexte inchangÃ©)

</TabItem>
<TabItem value="config" label="Modifications de Configuration">

````markdown
```diff
# docker-compose.yml - SÃ©curisation des services
version: '3.8'

services:
  api:
    image: node:18-alpine
-   ports:
-     - "3000:3000"  # Port exposÃ© publiquement
+   expose:
+     - "3000"  # Port interne uniquement
    environment:
-     - NODE_ENV=development
+     - NODE_ENV=production
+     - RATE_LIMIT=100
    volumes:
-     - .:/app  # Mount complet du code source
+     - ./dist:/app  # Uniquement les fichiers buildÃ©s
+   user: "node"  # Utilisateur non-root
+   read_only: true  # SystÃ¨me de fichiers en lecture seule
+   tmpfs:
+     - /tmp

  database:
    image: postgres:15-alpine
    environment:
-     POSTGRES_PASSWORD: password123
+     POSTGRES_PASSWORD_FILE: /run/secrets/db_password
+   secrets:
+     - db_password
    volumes:
      - db_data:/var/lib/postgresql/data
+   networks:
+     - backend  # RÃ©seau interne isolÃ©

+ proxy:
+   image: nginx:alpine
+   ports:
+     - "80:80"
+     - "443:443"
+   volumes:
+     - ./nginx.conf:/etc/nginx/nginx.conf:ro
+     - ./ssl:/etc/ssl/certs:ro
+   depends_on:
+     - api

+networks:
+  backend:
+    driver: bridge
+    internal: true

+secrets:
+  db_password:
+    file: ./secrets/db_password.txt
```
````

</TabItem>
<TabItem value="pipeline" label="Pipeline CI/CD">

````markdown
```diff
# .github/workflows/deploy.yml - Ajout des contrÃ´les de sÃ©curitÃ©
name: Deploy Application

on:
  push:
    branches: [ main ]
+   paths-ignore:
+     - '**.md'
+     - 'docs/**'

jobs:
  security-scan:
+   runs-on: ubuntu-latest
+   steps:
+     - uses: actions/checkout@v3
+
+     # Scan des secrets dans le code
+     - name: Secret Scan
+       uses: trufflesecurity/trufflehog@main
+       with:
+         path: ./
+
+     # Analyse des dÃ©pendances
+     - name: Dependency Scan
+       run: |
+         npm audit --audit-level high
+         npm audit fix

  test:
    runs-on: ubuntu-latest
+   needs: security-scan
    steps:
      - uses: actions/checkout@v3
+       with:
+         fetch-depth: 0  # Historique complet pour SonarQube

      - name: Setup Node.js
        uses: actions/setup-node@v3
        with:
          node-version: '18'
+         cache: 'npm'

      - name: Install dependencies
        run: npm ci
+
+     # Tests de sÃ©curitÃ©
+     - name: Security Tests
+       run: |
+         npm run test:security
+         npm run test:integration

  deploy:
    runs-on: ubuntu-latest
    needs: test
+   if: github.ref == 'refs/heads/main'
    environment: production
    steps:
-     - name: Deploy to server
-       run: scp -r ./ user@server:/app/
+     - name: Deploy with Docker
+       run: |
+         docker build -t app:${{ github.sha }} .
+         docker tag app:${{ github.sha }} registry.company.com/app:latest
+         docker push registry.company.com/app:latest
+
+     # VÃ©rification post-dÃ©ploiement
+     - name: Health Check
+       run: |
+         sleep 30
+         curl -f https://api.company.com/health || exit 1
```
````

</TabItem>
</Tabs>

## 3. Extensions GitHub Flavored Markdown <Badge niveau="AvancÃ©" />

### 3.1 Mentions et RÃ©fÃ©rences Collaboratives

GitHub Flavored Markdown (GFM) ajoute des fonctionnalitÃ©s spÃ©cifiques Ã  la collaboration d'Ã©quipe.

:::danger FonctionnalitÃ© disponible uniquement avec GitHub payant

L'utilisation des mentions d'**Ã©quipes** comme `@security-team`, `@devops-team`, ou `@qa-team` nÃ©cessite une **organisation GitHub** avec une **formule payante** (GitHub Team ou Enterprise).

Sans cela :

-   Les Ã©quipes ne peuvent **pas Ãªtre mentionnÃ©es** dans les issues ou pull requests.
-   Aucun membre ne recevra de notification via `@nom-de-l-Ã©quipe`.
-   L'autocomplÃ©tion `@` nâ€™affichera que des **utilisateurs individuels**.

**VÃ©rifie la disponibilitÃ© des Ã©quipes** dans ton dÃ©pÃ´t en tapant `@` dans une issue ou une PR : si lâ€™Ã©quipe n'apparaÃ®t pas, elle nâ€™est pas reconnue.

:::

<Tabs>
<TabItem value="mentions" label="Mentions Utilisateurs et Ã‰quipes">

```markdown
## Review de Code

**DÃ©veloppeur principal :** @john-doe  
**Ã‰quipe responsable :** @frontend-team  
**Reviewer sÃ©curitÃ© :** @security-team

### Assignations

-   **Frontend :** @alice-dev @bob-dev
-   **Backend :** @charlie-api @david-db
-   **DevOps :** @eve-ops @frank-infra

### Notifications Automatiques

Les mentions `@username` gÃ©nÃ¨rent des notifications automatiques.
Les Ã©quipes `@team-name` notifient tous les membres de l'Ã©quipe.
```

#### Utilisation Professionnelle

**Dans les Pull Requests :**

-   `@reviewer-lead` pour demander une review prioritaire
-   `@security-team` pour les modifications sensibles
-   `@devops-team` pour les changements d'infrastructure

**Dans les Issues :**

-   `@product-owner` pour validation fonctionnelle
-   `@qa-team` pour dÃ©finir les critÃ¨res de test

</TabItem>
<TabItem value="references" label="RÃ©fÃ©rences Issues et PR">

```markdown
## RÃ©fÃ©rences Automatiques

### Issues

-   Correction du bug #123
-   AmÃ©lioration demandÃ©e dans #456
-   Feature request #789 implÃ©mentÃ©e

### Pull Requests

-   Review de la PR #42
-   Merger aprÃ¨s validation de PR #56
-   Conflicts rÃ©solus dans PR #78

### Cross-Repository

-   Issue liÃ©e: user/other-repo#25
-   Documentation: company/docs#12
-   Template utilisÃ©: company/templates#5

### Mots-clÃ©s de Fermeture

-   Closes #123
-   Fixes #456
-   Resolves #789
```

#### Mots-clÃ©s Automatiques

| Mot-clÃ©         | Action          | Exemple                            |
| --------------- | --------------- | ---------------------------------- |
| `closes #123`   | Ferme l'issue   | `Closes #123` dans commit/PR       |
| `fixes #123`    | Corrige l'issue | `Fixes #123: Bug authentification` |
| `resolves #123` | RÃ©sout l'issue  | `Resolves #123 with new algorithm` |

</TabItem>
</Tabs>

### 3.2 Ã‰mojis et Communication Moderne

<Tabs>
<TabItem value="emoji-syntaxe" label="Syntaxe des Ã‰mojis">

```markdown
## Status du Projet

### DÃ©veloppement

-   :white_check_mark: Authentification terminÃ©e
-   :construction: API en cours de dÃ©veloppement
-   :warning: Base de donnÃ©es nÃ©cessite optimisation
-   :x: Tests d'intÃ©gration Ã©chouÃ©s

### Environnements

-   **Production :** :green_heart: Stable
-   **Staging :** :yellow_heart: Tests en cours
-   **Development :** :heart: Active

### Ã‰quipe

-   :rocket: Nouvelle fonctionnalitÃ© dÃ©ployÃ©e
-   :bug: Bug critique identifiÃ©
-   :ambulance: Hotfix nÃ©cessaire
-   :sparkles: AmÃ©lioration UI/UX
```

#### RÃ©sultat - DÃ©veloppement

-   âœ… Authentification terminÃ©e
-   ğŸš§ API en cours de dÃ©veloppement
-   âš ï¸ Base de donnÃ©es nÃ©cessite optimisation
-   âŒ Tests d'intÃ©gration Ã©chouÃ©s

#### RÃ©sultat - Environnements

-   **Production :** ğŸ’š Stable
-   **Staging :** ğŸ’› Tests en cours
-   **Development :** â¤ï¸ Active

#### RÃ©sultat - Ã‰quipe

-   :rocket: Nouvelle fonctionnalitÃ© dÃ©ployÃ©e
-   :bug: Bug critique identifiÃ©
-   :ambulance: Hotfix nÃ©cessaire
-   :sparkles: AmÃ©lioration UI/UX

</TabItem>
<TabItem value="emoji-categories" label="CatÃ©gories d'Ã‰mojis Professionnels">

```markdown
## Guide des Ã‰mojis DevSecOps

### ğŸ”§ DÃ©veloppement

-   :wrench: Configuration/Setup
-   :gear: ParamÃ¨tres systÃ¨me
-   :hammer: Outil de dÃ©veloppement
-   :nut_and_bolt: Composant technique

### ğŸš€ DÃ©ploiement

-   :rocket: Nouvelle release
-   :package: Build/Package
-   :ship: Mise en production
-   :anchor: Version stable

### ğŸ”’ SÃ©curitÃ©

-   :lock: Authentification
-   :key: Gestion des clÃ©s
-   :shield: Protection/Firewall
-   :closed_lock_with_key: Chiffrement

### ğŸ“Š Monitoring

-   :chart_with_upwards_trend: Performance
-   :bar_chart: MÃ©triques
-   :eyes: Surveillance
-   :mag: Investigation

### âš ï¸ Alertes

-   :warning: Attention requise
-   :rotating_light: Incident critique
-   :fire: Urgence maximale
-   :sos: Aide nÃ©cessaire
```

#### Usage RecommandÃ©

**Dans les commits :**

```bash
git commit -m ":lock: SÃ©curisation des endpoints API"
git commit -m ":bug: Correction du leak mÃ©moire"
git commit -m ":sparkles: Ajout authentification 2FA"
```

**Dans la documentation :**

-   ğŸ“š Guide utilisateur
-   ğŸ”§ Documentation technique
-   ğŸš€ Guide de dÃ©ploiement
-   ğŸ”’ ProcÃ©dures de sÃ©curitÃ©

</TabItem>
</Tabs>

### 3.3 FonctionnalitÃ©s Collaboratives AvancÃ©es

<Tabs>
<TabItem value="suggestions" label="Suggestions de Code">

````markdown
## Review Suggestions

Pour optimiser cette fonction, je suggÃ¨re :

```suggestion
function validateInput(data) {
  // Validation plus stricte avec Joi
  const schema = Joi.object({
    email: Joi.string().email().required(),
    password: Joi.string().min(8).pattern(new RegExp('^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#\$%\^&\*])')).required()
  });

  return schema.validate(data);
}
```
````

### Commentaires de Review

> **Note:** Cette suggestion amÃ©liore la sÃ©curitÃ© en appliquant une validation stricte des mots de passe.
>
> **Impact:** RÃ©duction des risques de comptes compromis de 85%.

````

</TabItem>
<TabItem value="templates" label="Templates de PR/Issues">

```markdown
## Template Pull Request

### ğŸ“‹ Description
BrÃ¨ve description des modifications apportÃ©es.

### ğŸ”„ Type de changement
- [ ] Bug fix (non-breaking change qui corrige un problÃ¨me)
- [ ] New feature (non-breaking change qui ajoute une fonctionnalitÃ©)
- [ ] Breaking change (fix ou feature qui casserait la compatibilitÃ©)
- [ ] Documentation update

### ğŸ§ª Tests
- [ ] Tests unitaires ajoutÃ©s/modifiÃ©s
- [ ] Tests d'intÃ©gration validÃ©s
- [ ] Tests de sÃ©curitÃ© passÃ©s
- [ ] Tests manuels effectuÃ©s

### ğŸ”’ SÃ©curitÃ©
- [ ] Pas de donnÃ©es sensibles dans le code
- [ ] Validation d'entrÃ©e implÃ©mentÃ©e
- [ ] Audit des dÃ©pendances effectuÃ©
- [ ] Review sÃ©curitÃ© demandÃ©e (@security-team)

### ğŸ“ Checklist
- [ ] Code auto-documentÃ© ou commentÃ©
- [ ] Documentation mise Ã  jour
- [ ] CHANGELOG.md mis Ã  jour
- [ ] Version bumped si nÃ©cessaire

### ğŸ”— Issues liÃ©es
Closes #123
Related to #456
````

</TabItem>
</Tabs>

## 4. Organisation et Workflow <Badge niveau="AvancÃ©" />

### 4.1 Conventions de Nommage Professionnelles

<Tabs>
<TabItem value="conventions" label="Standards par Contexte">

| Ã‰lÃ©ment              | Convention        | Exemple                                     | Justification              |
| -------------------- | ----------------- | ------------------------------------------- | -------------------------- |
| **Fichiers MD**      | kebab-case        | `api-documentation.md`                      | URL friendly, lisible      |
| **Dossiers**         | kebab-case        | `user-guides/`                              | CohÃ©rence systÃ¨me          |
| **Images**           | descriptive-kebab | `architecture-microservices-2024.png`       | SEO, maintenance           |
| **Ancres**           | lowercase-dash    | `#configuration-avancÃ©e`                    | URLs propres               |
| **Constantes**       | UPPER_SNAKE_CASE  | `API_KEY`, `DB_HOST`                        | Variables d'environnement  |
| **Variables Python** | snake_case        | `user_name`, `config_file`                  | Convention Python/SQL      |
| **Variables JS**     | camelCase         | `userName`, `configFile`                    | Convention JavaScript      |
| **Classes**          | PascalCase        | `UserService`, `ApiController`              | Convention POO universelle |
| **Branches Git**     | feature/type      | `feature/auth-2fa`, `hotfix/security-patch` | Workflow GitFlow           |

</TabItem>
<TabItem value="exemples" label="Exemples Concrets">

```markdown
## Structure de Projet Documentation
```

ğŸ“ project-docs/
â”œâ”€â”€ ğŸ“„ README.md # Point d'entrÃ©e principal
â”œâ”€â”€ ğŸ“„ CONTRIBUTING.md # Guide contributeur
â”œâ”€â”€ ğŸ“„ SECURITY.md # Politique de sÃ©curitÃ©
â”œâ”€â”€ ğŸ“„ CHANGELOG.md # Historique des versions
â”‚
â”œâ”€â”€ ğŸ“ docs/
â”‚ â”œâ”€â”€ ğŸ“ api-reference/ # Documentation API
â”‚ â”‚ â”œâ”€â”€ ğŸ“„ authentication.md
â”‚ â”‚ â”œâ”€â”€ ğŸ“„ endpoints-users.md
â”‚ â”‚ â””â”€â”€ ğŸ“„ rate-limiting.md
â”‚ â”‚
â”‚ â”œâ”€â”€ ğŸ“ user-guides/ # Guides utilisateur
â”‚ â”‚ â”œâ”€â”€ ğŸ“„ getting-started.md
â”‚ â”‚ â”œâ”€â”€ ğŸ“„ advanced-configuration.md
â”‚ â”‚ â””â”€â”€ ğŸ“„ troubleshooting.md
â”‚ â”‚
â”‚ â””â”€â”€ ğŸ“ deployment/ # Documentation dÃ©ploiement
â”‚ â”œâ”€â”€ ğŸ“„ docker-setup.md
â”‚ â”œâ”€â”€ ğŸ“„ kubernetes-config.md
â”‚ â””â”€â”€ ğŸ“„ monitoring-setup.md
â”‚
â””â”€â”€ ğŸ“ assets/
â”œâ”€â”€ ğŸ“ images/
â”‚ â”œâ”€â”€ ğŸ–¼ï¸ architecture-overview-2024.png
â”‚ â”œâ”€â”€ ğŸ–¼ï¸ user-flow-authentication.svg
â”‚ â””â”€â”€ ğŸ–¼ï¸ dashboard-monitoring-example.jpg
â””â”€â”€ ğŸ“ diagrams/
â”œâ”€â”€ ğŸ“„ system-architecture.mermaid
â””â”€â”€ ğŸ“„ database-schema.drawio

````

**Avantages de cette structure :**
- âœ… Navigation intuitive par domaine
- âœ… Nommage cohÃ©rent et prÃ©dictible
- âœ… ScalabilitÃ© pour Ã©quipes multiples
- âœ… Compatible avec gÃ©nÃ©rateurs statiques

</TabItem>
</Tabs>

### 4.2 IntÃ©gration Git et Versioning

<Tabs>
<TabItem value="workflow" label="Workflow de Documentation">

```markdown
## Processus de Mise Ã  Jour Documentation

### 1. PrÃ©paration
```bash
# CrÃ©er une branche pour la documentation
git checkout -b docs/update-api-reference

# VÃ©rifier les fichiers modifiÃ©s
git status
````

### 2. Ã‰dition

-   Modifier les fichiers Markdown concernÃ©s
-   Ajouter/mettre Ã  jour les images si nÃ©cessaire
-   VÃ©rifier les liens internes/externes

### 3. Validation

```bash
# Validation des liens
markdown-link-check docs/**/*.md

# VÃ©rification syntaxe
markdownlint docs/

# Tests de gÃ©nÃ©ration (si applicable)
npm run docs:build
```

### 4. Commit et Review

```bash
# Commit avec message descriptif
git add docs/
git commit -m "docs: update API authentication section

- Add 2FA configuration examples
- Update rate limiting documentation
- Fix broken links to external resources

Closes #234"

# Push et crÃ©ation PR
git push origin docs/update-api-reference
```

### 5. Review Process

-   [ ] **Review technique** par l'Ã©quipe
-   [ ] **Review factuelle** par les experts mÃ©tier
-   [ ] **Tests de gÃ©nÃ©ration** sur preview
-   [ ] **Validation accessibilitÃ©** (contrastes, alt text)

````

</TabItem>
<TabItem value="hooks" label="Git Hooks pour Documentation">

```bash
#!/bin/bash
# .git/hooks/pre-commit - Validation automatique
# Valide la documentation avant chaque commit

set -e

echo "ğŸ” Validation de la documentation..."

# VÃ©rification des liens cassÃ©s
if command -v markdown-link-check >/dev/null 2>&1; then
    echo "ğŸ“ VÃ©rification des liens..."
    find docs/ -name "*.md" -exec markdown-link-check {} \;
fi

# Validation syntaxe Markdown
if command -v markdownlint >/dev/null 2>&1; then
    echo "ğŸ“ Validation syntaxe Markdown..."
    markdownlint docs/**/*.md
fi

# VÃ©rification des images manquantes
echo "ğŸ–¼ï¸ VÃ©rification des images..."
missing_images=0
for md_file in $(find docs/ -name "*.md"); do
    # Extraction des rÃ©fÃ©rences d'images
    grep -oE '!\[.*\]\([^)]+\)' "$md_file" | while read -r img_ref; do
        img_path=$(echo "$img_ref" | sed -n 's/.*(\([^)]*\)).*/\1/p')

        # VÃ©rifier si le fichier existe (chemins relatifs)
        if [[ ! "$img_path" =~ ^https?:// ]] && [[ ! -f "docs/$img_path" ]] && [[ ! -f "$img_path" ]]; then
            echo "âŒ Image manquante: $img_path dans $md_file"
            missing_images=$((missing_images + 1))
        fi
    done
done

# VÃ©rification du front matter (si utilisÃ©)
echo "ğŸ“‹ Validation des mÃ©tadonnÃ©es..."
for md_file in $(find docs/ -name "*.md"); do
    if head -n 1 "$md_file" | grep -q "^---$"; then
        # VÃ©rifier que le front matter est bien fermÃ©
        if ! sed -n '2,/^---$/p' "$md_file" | tail -n 1 | grep -q "^---$"; then
            echo "âŒ Front matter mal formÃ© dans: $md_file"
            exit 1
        fi
    fi
done

echo "âœ… Validation terminÃ©e avec succÃ¨s !"
````

</TabItem>
</Tabs>

### 4.3 Templates et Standards d'Ã‰quipe

<Tabs>
<TabItem value="template-guide" label="Template Guide Technique">

````markdown
---
title: '[Nom du Guide]'
description: 'Description concise du contenu'
author: '[Nom Auteur]'
date: 'YYYY-MM-DD'
version: 'X.Y'
tags: ['tag1', 'tag2', 'tag3']
difficulty: 'DÃ©butant|IntermÃ©diaire|AvancÃ©'
estimated_time: 'XX minutes'
---

# [Titre du Guide]

:::note Informations
**â±ï¸ Temps estimÃ© :** XX minutes  
**ğŸ“š Niveau :** [DÃ©butant/IntermÃ©diaire/AvancÃ©]  
**ğŸ¯ Objectif :** [Objectif principal en une phrase]
:::

## ğŸ“‹ PrÃ©requis

-   [ ] [PrÃ©requis technique 1]
-   [ ] [PrÃ©requis technique 2]
-   [ ] [Connaissances requises]

## ğŸ¯ Objectifs d'Apprentissage

Ã€ la fin de ce guide, vous saurez :

1. [Objectif spÃ©cifique 1]
2. [Objectif spÃ©cifique 2]
3. [Objectif spÃ©cifique 3]

## 1. [Section Principale 1] <Badge niveau="[Niveau]" />

### 1.1 [Sous-section avec Explication]

[Contenu explicatif avec exemples]

<Tabs>
<TabItem value="exemple" label="Exemple Pratique">

```[language]
// Code d'exemple commentÃ©
[code snippet]
```
````

</TabItem>
<TabItem value="resultat" label="RÃ©sultat Attendu">

[Description du rÃ©sultat]

</TabItem>
</Tabs>

:::tip Bonne Pratique
[Conseil ou astuce pertinente]
:::

### 1.2 [Sous-section Suivante]

[Suite du contenu...]

## 2. [Section Principale 2] <Badge niveau="[Niveau]" />

[Contenu de la section...]

## ğŸ‹ï¸ Exercice Pratique

:::note Ã‰noncÃ©
[Description claire de l'exercice Ã  rÃ©aliser]
:::

<Tabs>
<TabItem value="exercice" label="ğŸ“ Ã€ Vous de Jouer">

[Instructions dÃ©taillÃ©es]

</TabItem>
<TabItem value="solution" label="âœ… Solution">

```[language]
// Solution commentÃ©e
[code solution]
```

[Explication de la solution]

</TabItem>
<TabItem value="evaluation" label="ğŸ“Š CritÃ¨res d'Ã‰valuation">

**Points Ã  vÃ©rifier :**

-   [ ] [CritÃ¨re 1]
-   [ ] [CritÃ¨re 2]
-   [ ] [CritÃ¨re 3]

</TabItem>
</Tabs>

## ğŸ”— Ressources ComplÃ©mentaires

### Documentation Officielle

-   [Lien 1](url) - Description
-   [Lien 2](url) - Description

### Outils RecommandÃ©s

-   **[Nom Outil]** - [Description et usage]
-   **[Nom Outil]** - [Description et usage]

### Articles et Tutoriels

-   [Article pertinent](url) - RÃ©sumÃ©
-   [Tutoriel avancÃ©](url) - RÃ©sumÃ©

## â¡ï¸ Prochaines Ã‰tapes

1. **[Ã‰tape suivante recommandÃ©e]** - [lien vers guide]
2. **[Approfondissement]** - [lien vers ressource]
3. **[Cas d'usage avancÃ©]** - [lien vers guide expert]

---

:::info MÃ©tadonnÃ©es

-   **ğŸ“ DerniÃ¨re mise Ã  jour :** [Date]
-   **ğŸ‘¥ Contributeurs :** [Liste]
-   **ğŸ”„ Version :** [NumÃ©ro version]
-   **ğŸ“‹ Statut :** [Brouillon/Review/PubliÃ©]
    :::

```markdown
---
title: '[Nom API] Documentation'
description: "Documentation complÃ¨te de l'API [Nom]"
version: 'v1.2.3'
base_url: 'https://api.example.com/v1'
date: '2025-06-20'
---
```

# [Nom API] - Documentation

:::note Informations API
**ğŸŒ URL de base :** `https://api.example.com/v1`
**ğŸ“Š Version :** v1.2.3
**ğŸ”’ Authentification :** Bearer Token (JWT)
**ğŸ“‹ Format :** JSON
**âš¡ Rate Limit :** 1000 req/hour
:::

## ğŸš€ Quick Start

### Installation

<Tabs>
<TabItem value="curl" label="cURL">

```bash
# Test de base de l'API
curl -H "Authorization: Bearer YOUR_TOKEN" \
     https://api.example.com/v1/status
```

</TabItem>
<TabItem value="javascript" label="JavaScript">

```javascript
// Configuration client API
const API_BASE = 'https://api.example.com/v1';
const headers = {
    Authorization: 'Bearer YOUR_TOKEN',
    'Content-Type': 'application/json',
};

// Test de connexion
fetch(`${API_BASE}/status`, { headers })
    .then((response) => response.json())
    .then((data) => console.log(data));
```

</TabItem>
<TabItem value="python" label="Python">

```python
import requests

# Configuration
API_BASE = "https://api.example.com/v1"
headers = {
    "Authorization": "Bearer YOUR_TOKEN",
    "Content-Type": "application/json"
}

# Test de connexion
response = requests.get(f"{API_BASE}/status", headers=headers)
print(response.json())
```

</TabItem>
</Tabs>

## ğŸ” Authentification

### Obtenir un Token

**Endpoint :** `POST /auth/login`

**ParamÃ¨tres :**

| ParamÃ¨tre     | Type    | Requis | Description                         |
| ------------- | ------- | :----: | ----------------------------------- |
| `email`       | string  |   âœ…   | Email de l'utilisateur              |
| `password`    | string  |   âœ…   | Mot de passe                        |
| `remember_me` | boolean |   âŒ   | Session persistante (dÃ©faut: false) |

**Exemple de requÃªte :**

```bash
curl -X POST https://api.example.com/v1/auth/login \
  -H "Content-Type: application/json" \
  -d '{
    "email": "user@example.com",
    "password": "securepassword",
    "remember_me": true
  }'
```

**RÃ©ponse (200 OK) :**

```json
{
    "status": "success",
    "data": {
        "access_token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
        "token_type": "Bearer",
        "expires_in": 3600,
        "user": {
            "id": 123,
            "email": "user@example.com",
            "role": "user"
        }
    }
}
```

### Utilisation du Token

Inclure le token dans l'header `Authorization` de toutes les requÃªtes :

```
Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
```

## ğŸ“š Endpoints

### Utilisateurs

#### GET /users - Lister les utilisateurs

**Description :** RÃ©cupÃ¨re la liste paginÃ©e des utilisateurs.

**ParamÃ¨tres de requÃªte :**

| ParamÃ¨tre | Type    | DÃ©faut | Description                               |
| --------- | ------- | ------ | ----------------------------------------- |
| `page`    | integer | 1      | NumÃ©ro de page                            |
| `limit`   | integer | 20     | Nombre d'Ã©lÃ©ments par page (max: 100)     |
| `role`    | string  | -      | Filtrer par rÃ´le (user, admin, moderator) |
| `search`  | string  | -      | Recherche par nom ou email                |

**Exemple :**

```bash
curl -H "Authorization: Bearer YOUR_TOKEN" \
  "https://api.example.com/v1/users?page=1&limit=10&role=user"
```

**RÃ©ponse (200 OK) :**

```json
{
    "status": "success",
    "data": {
        "users": [
            {
                "id": 1,
                "email": "john@example.com",
                "name": "John Doe",
                "role": "user",
                "created_at": "2024-01-15T10:30:00Z",
                "last_login": "2024-06-20T14:22:00Z"
            }
        ],
        "pagination": {
            "current_page": 1,
            "total_pages": 5,
            "total_items": 87,
            "items_per_page": 20
        }
    }
}
```

#### POST /users - CrÃ©er un utilisateur

**Description :** CrÃ©e un nouvel utilisateur.

**Body (JSON) :**

```json
{
    "email": "newuser@example.com",
    "name": "New User",
    "password": "securepassword",
    "role": "user"
}
```

**RÃ©ponse (201 Created) :**

```json
{
    "status": "success",
    "data": {
        "user": {
            "id": 124,
            "email": "newuser@example.com",
            "name": "New User",
            "role": "user",
            "created_at": "2024-06-20T15:30:00Z"
        }
    }
}
```

## âš ï¸ Gestion des Erreurs

### Codes d'Erreur Standards

| Code | Statut                | Description                |
| ---- | --------------------- | -------------------------- |
| 400  | Bad Request           | ParamÃ¨tres invalides       |
| 401  | Unauthorized          | Token manquant ou invalide |
| 403  | Forbidden             | Permissions insuffisantes  |
| 404  | Not Found             | Ressource introuvable      |
| 422  | Unprocessable Entity  | Erreurs de validation      |
| 429  | Too Many Requests     | Rate limit dÃ©passÃ©         |
| 500  | Internal Server Error | Erreur serveur             |

### Format des Erreurs

```json
{
    "status": "error",
    "error": {
        "code": "VALIDATION_ERROR",
        "message": "Les donnÃ©es fournies sont invalides",
        "details": {
            "email": ["L'email est requis"],
            "password": ["Le mot de passe doit contenir au moins 8 caractÃ¨res"]
        }
    }
}
```

## ğŸ“Š Rate Limiting

-   **Limite :** 1000 requÃªtes par heure par token
-   **Headers de rÃ©ponse :**
    -   `X-RateLimit-Limit`: Limite totale
    -   `X-RateLimit-Remaining`: RequÃªtes restantes
    -   `X-RateLimit-Reset`: Timestamp de reset

**Exemple de headers :**

```
X-RateLimit-Limit: 1000
X-RateLimit-Remaining: 987
X-RateLimit-Reset: 1640995200
```

## ğŸ§ª Environnements de Test

### Sandbox

**URL :** `https://api-sandbox.example.com/v1`  
**Authentification :** Token de test fourni  
**DonnÃ©es :** Dataset de test rÃ©initialisÃ© quotidiennement

### Postman Collection

[![Run in Postman](https://run.pstmn.io/button.svg)](https://app.getpostman.com/run-collection/your-collection-id)

## ğŸ“ Support et Contact

-   **ğŸ“§ Support technique :** api-support@example.com
-   **ğŸ“š Documentation :** https://docs.example.com
-   **ğŸ› Bug reports :** https://github.com/company/api/issues
-   **ğŸ’¬ Community :** https://discord.gg/company-api

---

:::info Informations Document

-   **ğŸ“ DerniÃ¨re mise Ã  jour :** 20 juin 2025
-   **ğŸ‘¥ Maintenu par :** Ã‰quipe API
-   **ğŸ”„ Version API :** v1.2.3
-   **ğŸ“‹ Statut :** Production stable
    :::

````

</TabItem>
</Tabs>

## 5. Cas Pratiques IntermÃ©diaires <Badge niveau="IntermÃ©diaire" />

### Cas Pratique 1 : Documentation de Module DevSecOps

:::note Ã‰noncÃ©
CrÃ©ez la documentation complÃ¨te d'un module de **monitoring de sÃ©curitÃ©** incluant :

- **Table des matiÃ¨res** avec navigation
- **Tableaux de configuration** avec alignements appropriÃ©s
- **Blocs de code** pour diffÃ©rents langages (Bash, Python, YAML)
- **Blocs diff** montrant les amÃ©liorations de sÃ©curitÃ©
- **Mentions d'Ã©quipes** et rÃ©fÃ©rences d'issues
- **Ã‰mojis** pour la communication claire
:::

<Tabs>
<TabItem value="enonce" label="ğŸ“ Votre Mission">

**SpÃ©cifications du module :**
- **Nom :** SecurityMonitor
- **Fonction :** Surveillance en temps rÃ©el des tentatives d'intrusion
- **Technologies :** Python, Prometheus, Grafana, Docker
- **Ã‰quipes :** @security-team, @devops-team, @monitoring-team

**Structure demandÃ©e :**
1. Introduction avec badges de statut
2. Configuration (tableau des paramÃ¨tres)
3. Installation (Ã©tapes avec code)
4. AmÃ©liorations rÃ©centes (blocs diff)
5. Alertes et notifications (Ã©mojis + mentions)
6. DÃ©pannage (FAQ)

</TabItem>
<TabItem value="solution" label="âœ… Solution ComplÃ¨te">

```markdown
# SecurityMonitor - Module de Surveillance SÃ©curisÃ©e

[![Build Status](https://img.shields.io/github/workflow/status/company/security-monitor/CI)](https://github.com/company/security-monitor/actions)
[![Security Rating](https://img.shields.io/badge/security-A+-green.svg)](https://sonarcloud.io/dashboard?id=security-monitor)
[![Coverage](https://img.shields.io/codecov/c/github/company/security-monitor.svg)](https://codecov.io/gh/company/security-monitor)

## ğŸ“‹ Table des MatiÃ¨res

1. [Vue d'ensemble](#vue-densemble)
2. [Configuration](#configuration)
3. [Installation](#installation)
4. [AmÃ©liorations v2.1](#amÃ©liorations-v21)
5. [Alertes et Notifications](#alertes-et-notifications)
6. [DÃ©pannage](#dÃ©pannage)

## Vue d'ensemble

Module Python de surveillance en temps rÃ©el des **tentatives d'intrusion** avec intÃ©gration Prometheus et alerting automatique.

**Ã‰quipes responsables :**
- **DÃ©veloppement :** @security-team
- **Infrastructure :** @devops-team
- **Monitoring :** @monitoring-team

## Configuration

### ParamÃ¨tres Principaux

| ParamÃ¨tre | Type | DÃ©faut | Description | Env Variable |
|-----------|:----:|:------:|-------------|:------------:|
| `log_level` | string | `INFO` | Niveau de logs | `LOG_LEVEL` |
| `scan_interval` | integer | `30` | Intervalle scan (secondes) | `SCAN_INTERVAL` |
| `max_attempts` | integer | `5` | Tentatives max avant ban | `MAX_ATTEMPTS` |
| `ban_duration` | integer | `3600` | DurÃ©e ban (secondes) | `BAN_DURATION` |
| `whitelist_ips` | array | `[]` | IPs exemptÃ©es | `WHITELIST_IPS` |
| `alert_webhook` | string | - | URL webhook Slack/Teams | `ALERT_WEBHOOK` |

### Sources de DonnÃ©es

| Source | Format | Localisation | Poids |
|--------|:------:|:------------:|:-----:|
| **Logs Apache** | Combined | `/var/log/apache2/access.log` | ğŸŸ¢ Ã‰levÃ© |
| **Logs Nginx** | JSON | `/var/log/nginx/access.log` | ğŸŸ¢ Ã‰levÃ© |
| **Logs SSH** | Syslog | `/var/log/auth.log` | ğŸŸ¡ Moyen |
| **Fail2ban** | Custom | `/var/log/fail2ban.log` | ğŸ”´ Critique |

## Installation

### PrÃ©requis

```bash
# Installation des dÃ©pendances systÃ¨me
sudo apt update && sudo apt install -y \
  python3.9 \
  python3-pip \
  prometheus-node-exporter \
  fail2ban

# VÃ©rification des versions
python3 --version  # >= 3.9
pip3 --version     # >= 21.0
````

### Installation du Module

```bash
# Clonage du repository
git clone https://github.com/company/security-monitor.git
cd security-monitor

# CrÃ©ation environnement virtuel
python3 -m venv venv
source venv/bin/activate

# Installation des dÃ©pendances Python
pip install -r requirements.txt

# Configuration
cp config.example.yaml config.yaml
# Ã‰diter config.yaml selon vos besoins

# Tests d'installation
python -m pytest tests/ -v
```

### Configuration Docker

```yaml
# docker-compose.yml
version: '3.8'

services:
    security-monitor:
        image: company/security-monitor:latest
        container_name: security-monitor
        environment:
            - LOG_LEVEL=INFO
            - SCAN_INTERVAL=30
            - MAX_ATTEMPTS=5
        volumes:
            - /var/log:/var/log:ro
            - ./config.yaml:/app/config.yaml:ro
        ports:
            - '8080:8080' # MÃ©triques Prometheus
        depends_on:
            - prometheus
        restart: unless-stopped

    prometheus:
        image: prom/prometheus:latest
        ports:
            - '9090:9090'
        volumes:
            - ./prometheus.yml:/etc/prometheus/prometheus.yml:ro
```

## AmÃ©liorations v2.1

### Optimisation des Performances

```diff
# analyzer.py - AmÃ©lioration de l'analyse des patterns
class ThreatAnalyzer:
    def __init__(self):
-       self.patterns = {}
-       self.load_patterns_from_file()
+       self.patterns = PatternCache(ttl=3600)  # Cache avec TTL
+       self.ml_model = load_ml_detector()      # DÃ©tection IA

    def analyze_log_entry(self, entry):
-       # Analyse par regex simple
-       for pattern in self.patterns:
-           if re.match(pattern, entry):
-               return True
+       # Analyse hybride : regex + machine learning
+       if self.quick_pattern_match(entry):
+           return self.ml_model.predict_threat_probability(entry) > 0.8
        return False

+   def quick_pattern_match(self, entry):
+       """PrÃ©-filtrage rapide avant analyse IA"""
+       return any(keyword in entry.lower() for keyword in self.threat_keywords)
```

### SÃ©curisation des Webhooks

```diff
# notifications.py - SÃ©curisation des webhooks
import hmac
import hashlib

def send_alert(webhook_url, payload):
-   # Envoi direct sans vÃ©rification
-   response = requests.post(webhook_url, json=payload)
+   # GÃ©nÃ©ration signature HMAC
+   secret = os.getenv('WEBHOOK_SECRET')
+   signature = hmac.new(
+       secret.encode(),
+       json.dumps(payload).encode(),
+       hashlib.sha256
+   ).hexdigest()
+
+   headers = {
+       'Content-Type': 'application/json',
+       'X-Signature': f'sha256={signature}',
+       'User-Agent': 'SecurityMonitor/2.1'
+   }
+
+   response = requests.post(webhook_url, json=payload, headers=headers, timeout=10)

    if response.status_code != 200:
        logger.error(f"Webhook failed: {response.status_code}")
```

### Configuration Rate Limiting

```diff
# config.yaml - AmÃ©lioration du rate limiting
rate_limiting:
-  enabled: false
+  enabled: true
+  rules:
+    - pattern: "login"
+      max_requests: 5
+      window: 300        # 5 minutes
+      action: "ban"
+    - pattern: "api"
+      max_requests: 100
+      window: 60         # 1 minute
+      action: "throttle"
+
+  actions:
+    ban:
+      duration: 3600     # 1 heure
+      notify: true
+    throttle:
+      delay: 1000        # 1 seconde
+      notify: false
```

## Alertes et Notifications

### Types d'Alertes

-   ğŸš¨ **Critique** : Tentative d'intrusion dÃ©tectÃ©e (@security-team)
-   âš ï¸ **Avertissement** : Seuil de tentatives atteint (@devops-team)
-   ğŸ“Š **Information** : Rapport quotidien (@monitoring-team)
-   ğŸ”’ **SÃ©curitÃ©** : Nouvelle rÃ¨gle appliquÃ©e (@security-team)

### Configuration Slack

```python
# notifications/slack.py
def send_security_alert(threat_level, details):
    """Envoi d'alerte sÃ©curitÃ© sur Slack avec mentions appropriÃ©es"""

    # DÃ©finition des mentions par niveau
    mentions = {
        'critical': '@security-team @devops-team',
        'warning': '@devops-team',
        'info': '@monitoring-team'
    }

    # Ã‰mojis par niveau de menace
    emojis = {
        'critical': 'ğŸš¨',
        'warning': 'âš ï¸',
        'info': 'ğŸ“Š'
    }

    message = f"""
{emojis[threat_level]} **Alerte SÃ©curitÃ© - {threat_level.upper()}**

**Source IP :** `{details['source_ip']}`
**Type d'attaque :** {details['attack_type']}
**Nombre de tentatives :** {details['attempts']}
**Timestamp :** {details['timestamp']}

**Action automatique :** {details['action_taken']}

{mentions[threat_level]} - Investigation requise

**Logs :** Voir Dashboard Grafana [ici](https://grafana.company.com/d/security)
"""

    return send_slack_message(message)
```

### Issues de Suivi

**Issues liÃ©es Ã  cette version :**

-   AmÃ©lioration performances : Closes #156
-   DÃ©tection IA : Implements #142
-   Webhooks sÃ©curisÃ©s : Fixes #189
-   Rate limiting : Resolves #201

**Pull Requests en cours :**

-   IntÃ©gration Elasticsearch : PR #67 (@alice-security)
-   Dashboard amÃ©liorÃ© : PR #68 (@bob-frontend)

## DÃ©pannage

### ProblÃ¨mes Courants

#### ğŸ” Module ne dÃ©marre pas

**SymptÃ´mes :** Erreur `ModuleNotFoundError`

**Solution :**

```bash
# VÃ©rifier l'environnement virtuel
source venv/bin/activate
pip list | grep -E "(prometheus|yaml|requests)"

# RÃ©installer si nÃ©cessaire
pip install --upgrade -r requirements.txt
```

#### âš ï¸ Faux positifs dÃ©tectÃ©s

**SymptÃ´mes :** Bans d'IPs lÃ©gitimes

**Solution :**

1. Ajouter l'IP Ã  la whitelist
2. Ajuster les seuils dans `config.yaml`
3. VÃ©rifier les patterns de dÃ©tection

```bash
# DÃ©bannir une IP
sudo fail2ban-client set security-monitor unbanip 192.168.1.100

# VÃ©rifier les rÃ¨gles actives
sudo fail2ban-client status security-monitor
```

#### ğŸ“Š MÃ©triques Prometheus manquantes

**VÃ©rification :**

```bash
# Test endpoint mÃ©triques
curl http://localhost:8080/metrics | grep security_

# VÃ©rifier configuration Prometheus
prometheus_config_reloader --config.file=/etc/prometheus/prometheus.yml --dry-run
```

### Support et Escalade

**Niveaux de support :**

1. **L1 - Monitoring** (@monitoring-team) - Issues opÃ©rationnelles
2. **L2 - DevOps** (@devops-team) - ProblÃ¨mes d'infrastructure
3. **L3 - Security** (@security-team) - Incidents de sÃ©curitÃ©

**Contacts d'urgence :**

-   ğŸ”´ **Incident critique** : #security-incidents + @security-lead
-   ğŸŸ¡ **ProblÃ¨me systÃ¨me** : #devops-alerts + @devops-lead
-   ğŸŸ¢ **Question gÃ©nÃ©rale** : #security-monitor-support

---

**Issues de rÃ©fÃ©rence :**

-   Configuration : Voir #123
-   Performance : Tracking #156
-   Documentation : Update #234

```

</TabItem>
<TabItem value="evaluation" label="ğŸ“Š Ã‰valuation DÃ©taillÃ©e">

**Points forts de cette solution :**

âœ… **Structure professionnelle** avec navigation complÃ¨te
âœ… **Tableaux complexes** avec alignements et formatage appropriÃ©
âœ… **Code multi-langages** (Bash, Python, YAML) bien commentÃ©
âœ… **Blocs diff pertinents** montrant des amÃ©liorations rÃ©elles
âœ… **Mentions d'Ã©quipes** contextuelles et appropriÃ©es
âœ… **Ã‰mojis professionnels** pour la communication claire
âœ… **RÃ©fÃ©rences issues/PR** intÃ©grÃ©es naturellement
âœ… **Templates rÃ©utilisables** pour d'autres modules

**Score :** 19/20

**Axes d'amÃ©lioration mineurs :**
- Ajouter diagramme d'architecture (Mermaid)
- Inclure mÃ©triques de performance quantifiÃ©es

**Utilisation professionnelle :**
Cette documentation peut servir de **template** pour tous les modules de sÃ©curitÃ© de l'Ã©quipe.

</TabItem>
</Tabs>

---

## ğŸ¯ Points ClÃ©s Ã  Retenir

:::tip RÃ©capitulatif Niveau IntermÃ©diaire
**Nouvelles compÃ©tences acquises :**

- âœ… **Tableaux professionnels** avec alignements et donnÃ©es complexes
- âœ… **Blocs de code avancÃ©s** avec coloration et commentaires dÃ©taillÃ©s
- âœ… **Blocs diff** pour visualiser les modifications (+/-)
- âœ… **Extensions GFM** : mentions, rÃ©fÃ©rences, Ã©mojis professionnels
- âœ… **Organisation projet** : conventions, workflow Git, templates
- âœ… **Documentation technique** complÃ¨te et structurÃ©e
:::

## â¡ï¸ Prochaine Ã‰tape

Excellent travail ! Vous maÃ®trisez maintenant le **niveau intermÃ©diaire**.

Direction le **[niveau avancÃ©](03-avance.md)** pour explorer :
- **MDX et composants React** pour l'interactivitÃ©
- **Diagrammes Mermaid** complexes et architectures
- **Automatisation** de la documentation (CI/CD, validation)
- **SÃ©curitÃ© avancÃ©e** et bonnes pratiques DevSecOps
- **MÃ©tadonnÃ©es et SEO** pour la documentation professionnelle

---

:::info MÃ©tadonnÃ©es du Document
- **ğŸ“ Version :** 1.0
- **ğŸ“… DerniÃ¨re mise Ã  jour :** Juin 2025
- **ğŸ‘¥ Niveau :** <Badge niveau="IntermÃ©diaire" />
- **â±ï¸ DurÃ©e :** 45 minutes
- **ğŸ“š PrÃ©requis :** [Fondamentaux Markdown](01-fondamentaux.md)
- **ğŸ¯ Objectif :** Utilisation professionnelle avancÃ©e
:::
```
