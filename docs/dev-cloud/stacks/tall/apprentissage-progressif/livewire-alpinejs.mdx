# √âtape 3 ter : Livewire + Alpine

:::danger A prendre en compte
**Parcours Livewire + Alpine.js ( _Hybride_ üî¥ )**<br />

Livewire = _R√©activit√© c√¥t√© serveur_<br />
Alpine.js = _R√©activit√© c√¥t√© client_
:::

## Qu'est-ce qu'une Architecture Hybride ?

**Une architecture hybride** combine intelligemment Livewire et Alpine.js pour tirer parti des **avantages de chaque technologie**.<br />
Voici les principes cl√©s :

-   **Livewire pour la logique complexe** : _Gestion des donn√©es, validation, s√©curit√© c√¥t√© serveur._
-   **Alpine.js pour les interactions l√©g√®res** : _Filtres, animations, micro-interactions c√¥t√© client._
-   **Communication bidirectionnelle** : _Les deux technologies se synchronisent et s'entraident._
-   **Optimisation des performances** : _Moins de requ√™tes serveur, plus de r√©activit√©._

## √âvolution Naturelle

```mermaid
---
title: Progression & Architecture Hybride
config:
  theme: 'neutral'
---
graph LR
A[<b>Livewire Pur</b>] -.-> |Limitation| B["Interactions lourdes"]
C[<b>Alpine.js Pur</b>] -.-> |Limitation| D["Pas de persistance"]
E[<b>Solution Hybride</b>] -.-> |Combine|F[Livewire logique] & G[Alpine.js interactions] -.-> |R√©sultat| H[Exp√©rience optimale]

F <-->|"&nbsp;\+&nbsp;"|G

style A fill:#e3f3e3
style C fill:#f3e3f3
style E fill:#e3e3f3
style H fill:#e3f3e3
```

_Maintenant que je ma√Ætrise Livewire **ET** Alpine.js s√©par√©ment, je vais les combiner intelligemment pour cr√©er une exp√©rience
utilisateur optimale en tirant parti des forces de chaque technologie._

## R√©partition des Responsabilit√©s

### Livewire s'occupe de :

-   **Logique m√©tier** : Cr√©ation, modification, suppression des t√¢ches
-   **Validation** : Contr√¥le des donn√©es c√¥t√© serveur
-   **Persistance** : Sauvegarde en base de donn√©es
-   **S√©curit√©** : Autorisation et authentification

### Alpine.js s'occupe de :

-   **Filtres temps r√©el** : Recherche et filtrage instantan√©
-   **Animations** : Transitions fluides et micro-interactions
-   **Drag & Drop** : R√©organisation des t√¢ches
-   **Notifications** : Messages toast et confirmations

## Patterns de Communication

### Qu'est-ce que la `Communication Livewire ‚Üî Alpine.js`

:::warning Fondamentaux pour comprendre la suite
La **communication** entre Livewire et Alpine.js se fait principalement via des **√©v√©nements**.

#### Pattern principal

```php
// Livewire dispatch un √©v√©nement
$this->dispatch('task-updated', $task->id);
```

```javascript
// Alpine.js √©coute l'√©v√©nement
x-on:task-updated.window="handleTaskUpdate($event.detail)"
```

#### Flux de donn√©es

**Livewire ‚Üí Alpine.js** : Via `dispatch()` et `x-on`
**Alpine.js ‚Üí Livewire** : Via `$wire` et m√©thodes Livewire

:::

## Composant Livewire Hybride

:::note Emplacement Fichier
**`app/Livewire/HybridTaskManager.php`**
:::

### Structure du fichier

```php
<?php

namespace App\Livewire;

use App\Models\Task;
use Livewire\Component;
use Livewire\Attributes\On;

class HybridTaskManager extends Component
{
    // Tout le code qui suit doit √™tre impl√©ment√© ici
}
```

### Attributs publiques

```php
// Propri√©t√©s Livewire - Logique m√©tier
public $title = '';
public $description = '';
public $editingTask = null;

// Propri√©t√©s partag√©es avec Alpine.js
public $selectedCategory = 'all';
public $showCompleted = true;
```

:::info Premier & dernier rappel
_C'est √† impl√©menter dans le fichier **HybridTaskManager** comme mentionn√© dans la structure du fichier._
:::

### R√®gles de validation

```php
// R√®gles de validation c√¥t√© serveur
protected $rules = [
    'title' => 'required|min:3|max:255',
    'description' => 'nullable|max:500'
];

// Messages personnalis√©s
protected $messages = [
    'title.required' => 'Le titre est obligatoire.',
    'title.min' => 'Le titre doit contenir au moins 3 caract√®res.',
    'title.max' => 'Le titre ne peut pas d√©passer 255 caract√®res.',
    'description.max' => 'La description ne peut pas d√©passer 500 caract√®res.'
];
```

### M√©thode `addTask()`

```php
// Ajouter une nouvelle t√¢che - Logique Livewire
public function addTask()
{
    $this->validate();

    $task = Task::create([
        'title' => $this->title,
        'description' => $this->description,
        'category' => $this->selectedCategory === 'all' ? 'general' : $this->selectedCategory,
    ]);

    // R√©initialiser le formulaire
    $this->reset(['title', 'description']);

    // Communication avec Alpine.js
    $this->dispatch('task-created', [
        'task' => $task,
        'message' => 'T√¢che ajout√©e avec succ√®s !'
    ]);
}
```

### M√©thode `updateTask()`

```php
// Mettre √† jour une t√¢che - Logique Livewire
public function updateTask()
{
    $this->validate();

    $task = Task::find($this->editingTask);
    if ($task) {
        $task->update([
            'title' => $this->title,
            'description' => $this->description,
        ]);

        $this->cancelEdit();

        // Communication avec Alpine.js
        $this->dispatch('task-updated', [
            'task' => $task,
            'message' => 'T√¢che mise √† jour !'
        ]);
    }
}
```

### M√©thode `toggleTask()`

```php
// Basculer l'√©tat d'une t√¢che - Logique Livewire
public function toggleTask($taskId)
{
    $task = Task::find($taskId);
    if ($task) {
        $task->update(['completed' => !$task->completed]);

        // Communication avec Alpine.js
        $this->dispatch('task-toggled', [
            'task' => $task,
            'message' => $task->completed ? 'T√¢che termin√©e !' : 'T√¢che remise en cours !'
        ]);
    }
}
```

### M√©thode `deleteTask()`

```php
// Supprimer une t√¢che - Logique Livewire
public function deleteTask($taskId)
{
    $task = Task::find($taskId);
    if ($task) {
        $task->delete();

        // Communication avec Alpine.js
        $this->dispatch('task-deleted', [
            'taskId' => $taskId,
            'message' => 'T√¢che supprim√©e !'
        ]);
    }
}
```

### M√©thode `reorderTasks()`

```php
// R√©organiser les t√¢ches - Appel√©e depuis Alpine.js
public function reorderTasks($orderedIds)
{
    foreach ($orderedIds as $index => $taskId) {
        Task::where('id', $taskId)->update(['order' => $index]);
    }

    // Confirmer la r√©organisation
    $this->dispatch('tasks-reordered', [
        'message' => 'T√¢ches r√©organis√©es !'
    ]);
}
```

### M√©thode `editTask()`

```php
// D√©marrer l'√©dition d'une t√¢che
public function editTask($taskId)
{
    $task = Task::find($taskId);
    if ($task) {
        $this->editingTask = $task->id;
        $this->title = $task->title;
        $this->description = $task->description ?? '';

        // Notifier Alpine.js
        $this->dispatch('editing-started', ['taskId' => $taskId]);
    }
}
```

### M√©thode `cancelEdit()`

```php
// Annuler l'√©dition
public function cancelEdit()
{
    $this->reset(['title', 'description', 'editingTask']);

    // Notifier Alpine.js
    $this->dispatch('editing-cancelled');
}
```

### M√©thode `#[On('alpine-filter-changed')]`

```php
// √âcouter les changements de filtres depuis Alpine.js
#[On('alpine-filter-changed')]
public function updateFilter($category, $showCompleted)
{
    $this->selectedCategory = $category;
    $this->showCompleted = $showCompleted;

    // Optionnel : log pour analytics
    logger('Filter changed', ['category' => $category, 'showCompleted' => $showCompleted]);
}
```

### M√©thode `getTasksProperty()`

```php
// Computed property pour les t√¢ches - Logique Livewire
public function getTasksProperty()
{
    return Task::query()
        ->when($this->selectedCategory !== 'all', function ($query) {
            $query->where('category', $this->selectedCategory);
        })
        ->when(!$this->showCompleted, function ($query) {
            $query->where('completed', false);
        })
        ->orderBy('order')
        ->latest()
        ->get();
}
```

### M√©thode `getStatsProperty()`

```php
// Computed property pour les statistiques
public function getStatsProperty()
{
    $tasks = $this->tasks;

    return [
        'total' => $tasks->count(),
        'completed' => $tasks->where('completed', true)->count(),
        'pending' => $tasks->where('completed', false)->count(),
        'completion_rate' => $tasks->count() > 0
            ? round(($tasks->where('completed', true)->count() / $tasks->count()) * 100)
            : 0
    ];
}
```

### M√©thode `render()`

```php
// Rendu du composant
public function render()
{
    return view('livewire.hybrid-task-manager');
}
```

## Composant Alpine.js Hybride

### Structure du composant Alpine.js

```javascript
function hybridTaskManager() {
    return {
        // √âtat local Alpine.js - Interactions l√©g√®res
        searchTerm: '',
        filterCategory: 'all',
        showCompleted: true,
        draggedTask: null,
        notifications: [],

        // Animations et transitions
        isAnimating: false,
        lastAction: null,

        // Toutes les m√©thodes ci-dessous vont dans cet objet
    };
}
```

### M√©thode `init()`

```javascript
// Initialisation - Communication avec Livewire
init() {
    // √âcouter les √©v√©nements Livewire
    this.setupLivewireListeners();

    // Initialiser les fonctionnalit√©s avanc√©es
    this.initDragAndDrop();
    this.initNotifications();
},
```

### M√©thode `setupLivewireListeners()`

```javascript
// Configuration des √©couteurs d'√©v√©nements Livewire
setupLivewireListeners() {
    // √âcouter les cr√©ations de t√¢ches
    window.addEventListener('task-created', (event) => {
        this.showNotification(event.detail.message, 'success');
        this.animateNewTask(event.detail.task.id);
    });

    // √âcouter les mises √† jour
    window.addEventListener('task-updated', (event) => {
        this.showNotification(event.detail.message, 'success');
        this.animateTaskUpdate(event.detail.task.id);
    });

    // √âcouter les basculements d'√©tat
    window.addEventListener('task-toggled', (event) => {
        this.showNotification(event.detail.message, 'info');
        this.animateToggle(event.detail.task.id);
    });

    // √âcouter les suppressions
    window.addEventListener('task-deleted', (event) => {
        this.showNotification(event.detail.message, 'warning');
        this.animateTaskRemoval(event.detail.taskId);
    });
},
```

### M√©thode `filterTasks()`

```javascript
// Filtrage c√¥t√© client - Alpine.js
filterTasks(tasks) {
    let filtered = tasks;

    // Filtre par recherche (instantan√©)
    if (this.searchTerm) {
        filtered = filtered.filter(task =>
            task.title.toLowerCase().includes(this.searchTerm.toLowerCase()) ||
            (task.description && task.description.toLowerCase().includes(this.searchTerm.toLowerCase()))
        );
    }

    return filtered;
},
```

### M√©thode `updateFilters()`

```javascript
// Mise √† jour des filtres - Communication avec Livewire
updateFilters() {
    // Notifier Livewire des changements
    this.$wire.dispatch('alpine-filter-changed', {
        category: this.filterCategory,
        showCompleted: this.showCompleted
    });
},
```

### M√©thode `initDragAndDrop()`

```javascript
// Initialisation du drag & drop
initDragAndDrop() {
    // Configuration du drag & drop avec SortableJS ou logique personnalis√©e
    this.setupSortable();
},

setupSortable() {
    // Logique de r√©organisation des t√¢ches
    // Communique avec Livewire une fois termin√©
},
```

### M√©thode `handleTaskReorder()`

```javascript
// Gestion de la r√©organisation - Communication avec Livewire
handleTaskReorder(orderedIds) {
    // Animation pendant la r√©organisation
    this.isAnimating = true;

    // Appel √† Livewire pour persister l'ordre
    this.$wire.reorderTasks(orderedIds).then(() => {
        this.isAnimating = false;
        this.showNotification('T√¢ches r√©organis√©es !', 'success');
    });
},
```

### M√©thode `showNotification()`

```javascript
// Syst√®me de notifications - Alpine.js
showNotification(message, type = 'info') {
    const notification = {
        id: Date.now(),
        message: message,
        type: type,
        show: true
    };

    this.notifications.push(notification);

    // Auto-suppression apr√®s 3 secondes
    setTimeout(() => {
        this.removeNotification(notification.id);
    }, 3000);
},

removeNotification(id) {
    this.notifications = this.notifications.filter(n => n.id !== id);
},
```

### M√©thodes d'animation

```javascript
// Animations pour les actions - Alpine.js
animateNewTask(taskId) {
    this.$nextTick(() => {
        const element = document.querySelector(`[data-task-id="${taskId}"]`);
        if (element) {
            element.classList.add('animate-bounce');
            setTimeout(() => element.classList.remove('animate-bounce'), 1000);
        }
    });
},

animateTaskUpdate(taskId) {
    const element = document.querySelector(`[data-task-id="${taskId}"]`);
    if (element) {
        element.classList.add('animate-pulse');
        setTimeout(() => element.classList.remove('animate-pulse'), 500);
    }
},

animateToggle(taskId) {
    const element = document.querySelector(`[data-task-id="${taskId}"]`);
    if (element) {
        element.classList.add('animate-spin');
        setTimeout(() => element.classList.remove('animate-spin'), 300);
    }
},

animateTaskRemoval(taskId) {
    const element = document.querySelector(`[data-task-id="${taskId}"]`);
    if (element) {
        element.classList.add('animate-fade-out');
    }
},
```

### Propri√©t√©s calcul√©es

```javascript
// Computed properties Alpine.js
get filteredTasks() {
    return this.filterTasks(this.$wire.tasks || []);
},

get hasActiveFilters() {
    return this.searchTerm || this.filterCategory !== 'all' || !this.showCompleted;
},

get searchStats() {
    const filtered = this.filteredTasks;
    const total = this.$wire.tasks ? this.$wire.tasks.length : 0;
    return { filtered: filtered.length, total: total };
},
```

## Concepts Cl√©s Hybrides

:::danger Urgent
Il est important de comprendre cette partie pour ma√Ætriser l'architecture hybride.
:::

### 1. Communication Livewire ‚Üí Alpine.js

```php
// Dans Livewire
$this->dispatch('task-created', ['task' => $task, 'message' => 'Succ√®s !']);
```

```html
<!-- Dans Alpine.js -->
<div x-on:task-created.window="handleTaskCreated($event.detail)"></div>
```

### 2. Communication Alpine.js ‚Üí Livewire

```javascript
// Depuis Alpine.js
this.$wire.methodName(parameters);
this.$wire.dispatch('event-name', data);
```

### 3. Partage d'√©tat

```php
// Livewire expose des donn√©es
public $sharedData = [];
```

```javascript
// Alpine.js y acc√®de
this.$wire.sharedData;
```

### 4. Patterns avanc√©s

```html
<!-- Combinaison wire + x-model -->
<input wire:model.live="serverData" x-model="clientData" />

<!-- Conditions hybrides -->
<div x-show="localCondition" wire:loading.remove></div>
```

## Vue Hybride

:::note Emplacement Fichier
**`resources/views/livewire/hybrid-task-manager.blade.php`**
:::

```html
<div
    class="max-w-4xl mx-auto px-6"
    x-data="hybridTaskManager()"
    x-init="init()"
>
    <!-- Banni√®re Hybride -->
    <div
        class="mb-6 p-4 bg-gradient-to-r from-purple-50 to-green-50 border-l-4 border-purple-400"
    >
        <div class="flex items-center">
            <div class="flex-shrink-0">
                <span class="text-2xl">‚ö°üèîÔ∏è</span>
            </div>
            <div class="ml-3">
                <p class="text-sm font-medium text-gray-800">
                    <strong>Architecture Hybride :</strong>
                    Livewire g√®re la logique m√©tier, Alpine.js optimise les
                    interactions !
                </p>
            </div>
        </div>
    </div>

    <!-- Notifications Alpine.js -->
    <div class="fixed top-4 right-4 z-50 space-y-2">
        <template x-for="notification in notifications" :key="notification.id">
            <div
                x-show="notification.show"
                x-transition:enter="transition ease-out duration-300"
                x-transition:enter-start="opacity-0 transform translate-x-6"
                x-transition:enter-end="opacity-100 transform translate-x-0"
                x-transition:leave="transition ease-in duration-200"
                x-transition:leave-start="opacity-100 transform translate-x-0"
                x-transition:leave-end="opacity-0 transform translate-x-6"
                class="px-4 py-3 rounded-lg shadow-lg text-white"
                :class="{
                     'bg-green-500': notification.type === 'success',
                     'bg-blue-500': notification.type === 'info',
                     'bg-yellow-500': notification.type === 'warning',
                     'bg-red-500': notification.type === 'error'
                 }"
            >
                <div class="flex items-center justify-between">
                    <span x-text="notification.message"></span>
                    <button
                        @click="removeNotification(notification.id)"
                        class="ml-2 text-white hover:text-gray-200"
                    >
                        &times;
                    </button>
                </div>
            </div>
        </template>
    </div>

    <!-- Statistiques avec animations -->
    <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-6">
        <div
            class="bg-white p-4 rounded-lg shadow text-center transform transition-transform hover:scale-105"
        >
            <div class="text-2xl font-bold text-blue-600">
                {{ $this->stats['total'] }}
            </div>
            <div class="text-gray-600">Total</div>
        </div>
        <div
            class="bg-white p-4 rounded-lg shadow text-center transform transition-transform hover:scale-105"
        >
            <div class="text-2xl font-bold text-green-600">
                {{ $this->stats['completed'] }}
            </div>
            <div class="text-gray-600">Termin√©es</div>
        </div>
        <div
            class="bg-white p-4 rounded-lg shadow text-center transform transition-transform hover:scale-105"
        >
            <div class="text-2xl font-bold text-yellow-600">
                {{ $this->stats['pending'] }}
            </div>
            <div class="text-gray-600">En cours</div>
        </div>
        <div
            class="bg-white p-4 rounded-lg shadow text-center transform transition-transform hover:scale-105"
        >
            <div class="text-2xl font-bold text-purple-600">
                {{ $this->stats['completion_rate'] }}%
            </div>
            <div class="text-gray-600">Progression</div>
        </div>
    </div>

    <!-- Recherche et filtres hybrides -->
    <div class="bg-white rounded-lg shadow-md p-6 mb-6">
        <div class="flex items-center justify-between mb-4">
            <h2 class="text-xl font-semibold">üîç Recherche et filtres</h2>
            <div class="text-sm text-gray-500" x-show="hasActiveFilters">
                <span x-text="searchStats.filtered"></span> /
                <span x-text="searchStats.total"></span> t√¢ches
            </div>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
            <!-- Recherche instantan√©e Alpine.js -->
            <div>
                <label class="block text-sm font-medium text-gray-700 mb-2"
                    >Recherche instantan√©e</label
                >
                <input
                    type="text"
                    x-model="searchTerm"
                    class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500"
                    placeholder="Rechercher..."
                />
            </div>

            <!-- Filtre par cat√©gorie Livewire -->
            <div>
                <label class="block text-sm font-medium text-gray-700 mb-2"
                    >Cat√©gorie</label
                >
                <select
                    wire:model.live="selectedCategory"
                    x-model="filterCategory"
                    @change="updateFilters()"
                    class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500"
                >
                    <option value="all">Toutes</option>
                    <option value="work">Travail</option>
                    <option value="personal">Personnel</option>
                    <option value="urgent">Urgent</option>
                </select>
            </div>

            <!-- Toggle des t√¢ches termin√©es -->
            <div>
                <label class="block text-sm font-medium text-gray-700 mb-2"
                    >Affichage</label
                >
                <div class="flex items-center space-x-2">
                    <input
                        type="checkbox"
                        wire:model.live="showCompleted"
                        x-model="showCompleted"
                        @change="updateFilters()"
                        class="rounded border-gray-300 text-blue-600 focus:ring-blue-500"
                    />
                    <span class="text-sm text-gray-700">Termin√©es</span>
                </div>
            </div>

            <!-- Bouton reset -->
            <div class="flex items-end">
                <button
                    @click="searchTerm = ''; filterCategory = 'all'; showCompleted = true; updateFilters();"
                    class="px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors"
                >
                    üîÑ R√©initialiser
                </button>
            </div>
        </div>
    </div>

    <!-- Formulaire Livewire avec validation -->
    <div class="bg-white rounded-lg shadow-md p-6 mb-6">
        <h2 class="text-xl font-semibold mb-4">
            {{ $editingTask ? '‚úèÔ∏è Modifier la t√¢che' : '‚ûï Ajouter une t√¢che' }}
        </h2>

        <form wire:submit="{{ $editingTask ? 'updateTask' : 'addTask' }}">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <!-- Titre avec validation Livewire -->
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2"
                        >Titre *</label
                    >
                    <input
                        type="text"
                        wire:model.live="title"
                        class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 @error('title') border-red-500 @enderror"
                        placeholder="Ex: Terminer le projet"
                    />
                    @error('title')
                    <p class="mt-1 text-sm text-red-600">{{ $message }}</p>
                    @enderror
                </div>

                <!-- Description -->
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2"
                        >Description</label
                    >
                    <input
                        type="text"
                        wire:model.live="description"
                        class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 @error('description') border-red-500 @enderror"
                        placeholder="D√©tails optionnels..."
                    />
                    @error('description')
                    <p class="mt-1 text-sm text-red-600">{{ $message }}</p>
                    @enderror
                </div>
            </div>

            <!-- Boutons d'action -->
            <div class="mt-4 flex gap-2">
                <button
                    type="submit"
                    wire:loading.attr="disabled"
                    class="px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50"
                >
                    <span wire:loading.remove>
                        {{ $editingTask ? 'üíæ Mettre √† jour' : '‚ú® Ajouter' }}
                    </span>
                    <span wire:loading>‚è≥ Traitement...</span>
                </button>

                @if($editingTask)
                <button
                    type="button"
                    wire:click="cancelEdit"
                    class="px-6 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors"
                >
                    ‚ùå Annuler
                </button>
                @endif
            </div>
        </form>
    </div>

    <!-- Liste des t√¢ches avec drag & drop -->
    <div class="bg-white rounded-lg shadow-md" x-ref="taskList">
        <div class="p-4 border-b">
            <h2 class="text-xl font-semibold">
                üìã Mes T√¢ches (<span x-text="filteredTasks.length"></span>)
            </h2>
        </div>

        @forelse($this->tasks as $task)
        <div
            class="p-4 border-b last:border-b-0 hover:bg-gray-50 transition-colors transform"
            wire:key="task-{{ $task->id }}"
            data-task-id="{{ $task->id }}"
            x-show="filteredTasks.some(t => t.id === {{ $task->id }})"
            x-transition:enter="transition ease-out duration-300"
            x-transition:enter-start="opacity-0 transform translate-y-4"
            x-transition:enter-end="opacity-100 transform translate-y-0"
            x-transition:leave="transition ease-in duration-200"
            x-transition:leave-start="opacity-100 transform translate-y-0"
            x-transition:leave-end="opacity-0 transform translate-y-4"
        >
            <div class="flex items-center justify-between">
                <!-- Informations de la t√¢che -->
                <div class="flex-1">
                    <h3
                        class="font-medium {{ $task->completed ? 'line-through text-gray-500' : 'text-gray-800' }}"
                    >
                        {{ $task->title }}
                    </h3>
                    @if($task->description)
                    <p
                        class="text-sm text-gray-600 mt-1 {{ $task->completed ? 'line-through' : '' }}"
                    >
                        {{ $task->description }}
                    </p>
                    @endif
                    <div class="flex items-center space-x-2 mt-2">
                        <p class="text-xs text-gray-400">
                            Cr√©√©e {{ $task->created_at->diffForHumans() }}
                        </p>
                        @if($task->category)
                        <span
                            class="px-2 py-1 bg-blue-100 text-blue-800 rounded-full text-xs"
                        >
                            {{ $task->category }}
                        </span>
                        @endif
                    </div>
                </div>

                <!-- Actions avec animations -->
                <div class="flex items-center gap-2 ml-4">
                    <!-- Drag handle -->
                    <div
                        class="cursor-move text-gray-400 hover:text-gray-600 p-1"
                    >
                        ‚ãÆ‚ãÆ
                    </div>

                    <!-- Toggle avec animation -->
                    <button
                        wire:click="toggleTask({{ $task->id }})"
                        wire:loading.attr="disabled"
                        wire:target="toggleTask({{ $task->id }})"
                        class="p-2 rounded-lg transition-all transform hover:scale-110 {{ $task->completed ? 'bg-green-100 text-green-700' : 'bg-gray-100 text-gray-700 hover:bg-green-100' }}"
                    >
                        <span
                            wire:loading.remove
                            wire:target="toggleTask({{ $task->id }})"
                        >
                            {{ $task->completed ? '‚úÖ' : '‚è≥' }}
                        </span>
                        <span
                            wire:loading
                            wire:target="toggleTask({{ $task->id }})"
                            class="animate-spin"
                        >
                            üîÑ
                        </span>
                    </button>

                    <!-- √âdition -->
                    <button
                        wire:click="editTask({{ $task->id }})"
                        class="p-2 bg-blue-100 text-blue-700 rounded-lg hover:bg-blue-200 transition-all transform hover:scale-110"
                    >
                        ‚úèÔ∏è
                    </button>

                    <!-- Suppression avec confirmation Alpine.js -->
                    <button
                        @click="if(confirm('√ätes-vous s√ªr ?')) $wire.deleteTask({{ $task->id }})"
                        wire:loading.attr="disabled"
                        wire:target="deleteTask({{ $task->id }})"
                        class="p-2 bg-red-100 text-red-700 rounded-lg hover:bg-red-200 transition-all transform hover:scale-110"
                    >
                        <span
                            wire:loading.remove
                            wire:target="deleteTask({{ $task->id }})"
                            >üóëÔ∏è</span
                        >
                        <span
                            wire:loading
                            wire:target="deleteTask({{ $task->id }})"
                            class="animate-spin"
                            >üîÑ</span
                        >
                    </button>
                </div>
            </div>
        </div>
        @empty
        <div class="p-8 text-center text-gray-500">
            <div class="text-4xl mb-4">üìù</div>
            <p>Aucune t√¢che trouv√©e.</p>
        </div>
        @endforelse
    </div>

    <!-- D√©monstration des fonctionnalit√©s hybrides -->
    <div
        class="mt-6 p-4 bg-gradient-to-r from-purple-50 to-green-50 border-l-4 border-purple-400"
    >
        <h3 class="font-medium text-purple-800 mb-2">
            üîß Fonctionnalit√©s hybrides d√©montr√©es :
        </h3>
        <div
            class="grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-gray-700"
        >
            <div>
                <h4 class="font-medium text-purple-700 mb-1">
                    Livewire (Serveur) :
                </h4>
                <ul class="space-y-1">
                    <li>‚Ä¢ Validation et logique m√©tier</li>
                    <li>‚Ä¢ Persistance des donn√©es</li>
                    <li>‚Ä¢ Gestion des √©tats complexes</li>
                    <li>‚Ä¢ S√©curit√© et autorisation</li>
                </ul>
            </div>
            <div>
                <h4 class="font-medium text-green-700 mb-1">
                    Alpine.js (Client) :
                </h4>
                <ul class="space-y-1">
                    <li>‚Ä¢ Recherche instantan√©e</li>
                    <li>‚Ä¢ Animations et transitions</li>
                    <li>‚Ä¢ Notifications temps r√©el</li>
                    <li>‚Ä¢ Drag & drop (prochainement)</li>
                </ul>
            </div>
        </div>
    </div>
</div>

<!-- Script Alpine.js -->
<script>
    function hybridTaskManager() {
        return {
            // √âtat local Alpine.js
            searchTerm: '',
            filterCategory: 'all',
            showCompleted: true,
            notifications: [],
            isAnimating: false,

            // Initialisation
            init() {
                this.setupLivewireListeners();
            },

            // Configuration des √©couteurs Livewire
            setupLivewireListeners() {
                window.addEventListener('task-created', (event) => {
                    this.showNotification(event.detail.message, 'success');
                    this.animateNewTask(event.detail.task.id);
                });

                window.addEventListener('task-updated', (event) => {
                    this.showNotification(event.detail.message, 'success');
                });

                window.addEventListener('task-toggled', (event) => {
                    this.showNotification(event.detail.message, 'info');
                });

                window.addEventListener('task-deleted', (event) => {
                    this.showNotification(event.detail.message, 'warning');
                    this.animateTaskRemoval(event.detail.taskId);
                });
            },

            // Filtrage c√¥t√© client
            filterTasks(tasks) {
                if (!this.searchTerm) return tasks;

                return tasks.filter(
                    (task) =>
                        task.title
                            .toLowerCase()
                            .includes(this.searchTerm.toLowerCase()) ||
                        (task.description &&
                            task.description
                                .toLowerCase()
                                .includes(this.searchTerm.toLowerCase())),
                );
            },

            // Mise √† jour des filtres
            updateFilters() {
                this.$wire.dispatch('alpine-filter-changed', {
                    category: this.filterCategory,
                    showCompleted: this.showCompleted,
                });
            },

            // Syst√®me de notifications
            showNotification(message, type = 'info') {
                const notification = {
                    id: Date.now(),
                    message: message,
                    type: type,
                    show: true,
                };

                this.notifications.push(notification);

                setTimeout(() => {
                    this.removeNotification(notification.id);
                }, 3000);
            },

            removeNotification(id) {
                this.notifications = this.notifications.filter(
                    (n) => n.id !== id,
                );
            },

            // Animations
            animateNewTask(taskId) {
                this.$nextTick(() => {
                    const element = document.querySelector(
                        `[data-task-id="${taskId}"]`,
                    );
                    if (element) {
                        element.classList.add('animate-bounce');
                        setTimeout(
                            () => element.classList.remove('animate-bounce'),
                            1000,
                        );
                    }
                });
            },

            animateTaskRemoval(taskId) {
                const element = document.querySelector(
                    `[data-task-id="${taskId}"]`,
                );
                if (element) {
                    element.style.transition = 'all 0.3s ease';
                    element.style.opacity = '0';
                    element.style.transform = 'translateX(100px)';
                }
            },

            // Propri√©t√©s calcul√©es
            get filteredTasks() {
                const livewireTasks = this.$wire.tasks || [];
                return this.filterTasks(livewireTasks);
            },

            get hasActiveFilters() {
                return (
                    this.searchTerm ||
                    this.filterCategory !== 'all' ||
                    !this.showCompleted
                );
            },

            get searchStats() {
                const filtered = this.filteredTasks;
                const total = this.$wire.tasks ? this.$wire.tasks.length : 0;
                return { filtered: filtered.length, total: total };
            },
        };
    }
</script>
```

## Layout pour l'Hybride

:::note Emplacement Fichier
**`resources/views/layouts/app.blade.php`**
:::

```html
<!DOCTYPE html>
<html lang="fr">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>TALL Tasks - Hybride</title>
        <script src="https://cdn.tailwindcss.com"></script>
        <script>
            tailwind.config = {
                theme: {
                    extend: {
                        animation: {
                            'fade-out': 'fadeOut 0.3s ease-in-out',
                        },
                        keyframes: {
                            fadeOut: {
                                '0%': {
                                    opacity: '1',
                                    transform: 'translateY(0)',
                                },
                                '100%': {
                                    opacity: '0',
                                    transform: 'translateY(-10px)',
                                },
                            },
                        },
                    },
                },
            };
        </script>
        @livewireStyles
    </head>
    <body class="bg-gray-100">
        <div class="min-h-screen">
            <!-- Header -->
            <header class="bg-white shadow-sm border-b">
                <div class="max-w-4xl mx-auto px-6 py-4">
                    <div class="flex items-center justify-between">
                        <h1 class="text-2xl font-bold text-gray-800">
                            TALL Tasks
                        </h1>
                        <div class="flex items-center space-x-2">
                            <span
                                class="px-2 py-1 bg-blue-100 text-blue-800 rounded text-sm"
                                >Tailwind ‚úì</span
                            >
                            <span
                                class="px-2 py-1 bg-green-100 text-green-800 rounded text-sm"
                                >Alpine.js ‚úì</span
                            >
                            <span
                                class="px-2 py-1 bg-red-100 text-red-800 rounded text-sm"
                                >Laravel ‚úì</span
                            >
                            <span
                                class="px-2 py-1 bg-purple-100 text-purple-800 rounded text-sm"
                                >Livewire ‚úì</span
                            >
                        </div>
                    </div>
                    <div class="mt-2 text-sm text-gray-600">
                        √âtape 3 ter:
                        <span class="text-purple-600 font-medium"
                            >Architecture Hybride ‚ö°üèîÔ∏è</span
                        >
                    </div>
                </div>
            </header>

            <!-- Contenu principal -->
            <main class="py-8">{{ $slot }}</main>
        </div>

        <script
            defer
            src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js"
        ></script>
        @livewireScripts
    </body>
</html>
```

## Route pour l'Hybride

:::note Emplacement Fichier
**`routes/web.php`**
:::

```php
<?php

use App\Livewire\HybridTaskManager;

Route::get('/', HybridTaskManager::class);
```

## Diagramme de S√©quence Hybride

```mermaid
---
config:
  theme: 'neutral'
---
sequenceDiagram
    participant U as Utilisateur
    participant A as Alpine.js
    participant L as Livewire
    participant S as Serveur Laravel
    participant DB as Base de donn√©es

    Note over U,DB: Interactions hybrides
    U->>A: Tape dans la recherche
    A->>A: Filtre instantan√© (c√¥t√© client)
    A-->>U: R√©sultats imm√©diats

    U->>L: Clique "Ajouter t√¢che"
    L->>S: Validation + logique m√©tier
    S->>DB: Persistance des donn√©es
    DB-->>S: Succ√®s
    S->>L: T√¢che cr√©√©e
    L->>A: dispatch('task-created')
    A->>A: Animation + notification
    A-->>U: Feedback visuel

    U->>A: Drag & drop t√¢che
    A->>A: Animation imm√©diate
    A->>L: Appel $wire.reorderTasks()
    L->>S: Mise √† jour ordre
    S->>DB: Sauvegarde ordre
    DB-->>S: Succ√®s
    S->>L: Confirmation
    L->>A: dispatch('tasks-reordered')
    A-->>U: Notification succ√®s
```

## Avantages de l'Architecture Hybride

-   ‚úÖ **Meilleur des deux mondes** : _Logique serveur s√©curis√©e + interactions client fluides._
-   ‚úÖ **Performance optimis√©e** : _R√©activit√© instantan√©e pour les filtres, validation serveur pour les donn√©es._
-   ‚úÖ **Exp√©rience utilisateur sup√©rieure** : _Animations fluides et feedback imm√©diat._
-   ‚úÖ **Maintenabilit√©** : _S√©paration claire des responsabilit√©s._
-   ‚úÖ **√âvolutivit√©** : _Chaque technologie g√®re sa partie optimalement._

## Quand Utiliser l'Architecture Hybride

| Cas d'usage              | Recommandation |
| ------------------------ | -------------- |
| **Application simple**   | Livewire pur   |
| **Interface riche**      | Alpine.js pur  |
| **Application complexe** | **Hybride**    |
| **Besoins √©volutifs**    | **Hybride**    |
| **√âquipe mixte**         | **Hybride**    |

<br />

:::tip R√©sultat imm√©diat
Architecture hybride optimale alliant puissance et performance !
:::
